---
title: Синхронизация друзей и действий
manager: soliver
ms.date: 03/09/2015
ms.audience: Developer
ms.topic: overview
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 6e91b765-a207-4d8c-8763-5d643ca4d0c0
description: Outlook Social Connector (OSC) поддерживает отображение сведений из социальной сети о человеке в карточке контакта или в области людей Outlook. SharePoint Server, SharePoint Workspace, клиент Lync и все клиентские приложения Office, которые поддерживают сведения о присутствии, поддерживают карточку контакта.
ms.openlocfilehash: 0d6881c5d596519422d01ca61a00b1a68e610f2c
ms.sourcegitcommit: 8fe462c32b91c87911942c188f3445e85a54137c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "32329203"
---
# <a name="synchronizing-friends-and-activities"></a>Синхронизация друзей и действий

Outlook Social Connector (OSC) поддерживает отображение сведений из социальной сети о человеке в карточке контакта или в области людей Outlook. SharePoint Server, SharePoint Workspace, клиент Lync и все клиентские приложения Office, которые поддерживают сведения о присутствии, поддерживают карточку контакта.
  
Карточку контакта можно использовать в сценариях совместной работы в приложениях Office, чтобы узнать больше о контактах, с которых вы сотрудничаете. Примеры этих сценариев включают обмен сообщениями в Outlook и совместное авторство документа в Word. При **нажатии** новой вкладки "Что нового" карточки контакта отображаются сведения об этом человеке. 
  
В области людей Outlook отображаются сведения о человеке, который может быть отправивший или получатель выбранного элемента Outlook. Каждый раз, когда вы выбираете другого человека в области "Люди" или другой элемент в обозревателе Outlook или открываете элемент Outlook в инспекторе, Outlook Social Connector (OSC) обновляет people Pane. 
  
Чтобы карточка контакта или области людей отображала текущие сведения для выбранного человека, OSC синхронизирует такую информацию с помощью поставщиков OSC и в определенной форме кэширование. Эта синхронизация зависит от поставщиков OSC, установленных на клиентских компьютерах, социальных сетей, которые вы вошли через их поставщиков OSC, и режима синхронизации, поддерживаемого каждым поставщиком OSC для этих социальных сетей.
  
OsC поддерживает синхронизацию друзей, не друзей и действий для друзей и других по-разному: кэширование синхронизации, синхронизация по требованию и гибридная синхронизация. Основное различие между этими режимами синхронизации заключается в том, где OSC хранит данные — в папке в хранилище Outlook по умолчанию пользователя или в памяти на компьютере пользователя. В каждом случае, как отмечено в этом разделе, по умолчанию данные остаются в папке или памяти до их обновления. В некоторых случаях минимальный период времени можно настроить с помощью групповой политики. Дополнительные сведения о групповых политиках, которые управляют поведением OSC, см. в сведениях об управлении Outlook Social Connector с [помощью групповой политики.](https://support.microsoft.com/default.aspx?scid=kb%3Ben-US%3B2020103)
  
Обратите внимание, что если выбранный человек не является членом социальной сети, osC не отображает сведения о человеке или действиях для этого человека в карточке контакта или области людей.
  
## <a name="cached-synchronization"></a>Кэширование синхронизации

Поставщик OSC может хранить сведения о друзьях в социальной сети в определенной папке в стандартном хранилище Outlook пользователя и периодически обновлять кэш по истечении указанного срока. Кэш данных в папке имеет преимущество уменьшения трафика в социальные сети.
  
> [!NOTE]
> Начиная с Outlook Social Connector 2013, OSC больше не поддерживает кэширование синхронизации действий. 
  
### <a name="cached-synchronization-of-friends"></a>Кэширование синхронизации друзей

Если поставщик OSC поддерживает кэширование синхронизации для друзей, OSC кэшируется сведения для друзей во время входа пользователя в социальной сети. Эти сведения кэшироваться в папке контактов Outlook, относясь к этой социальной сети, в хранилище Outlook по умолчанию для пользователя. Имя папки контактов основано на имени социальной сети, которое OSC получает с помощью свойства [ISocialProvider::SocialNetworkName.](isocialprovider-socialnetworkname.md) 
  
В кэшизированной синхронизации OSC сохраняет сведения только для друзей во время входа пользователя в социальной сети. OsC не имеет доступа к сведениям для не-друзей.
  
По умолчанию osC обновляет папку контактов для сведений друзей из социальной сети один раз в день (или один раз в 1440 минут). Этот интервал обновления также можно установить с помощью групповой политики, как было рассмотрено в начале этой темы.
  
Если во время обновления возникает ошибка, OSC повторно передается через интервал, указанный элементом **contactSyncRestartInterval** в **XML** возможностей. Этот интервал повторной попытку имеет значение по умолчанию 30 минут, а также может быть установлен групповой политикой. 
  
Когда пользователь открывает карточку контакта  и выбирает вкладку  "Что нового", обновляется вкладка "Что нового". Аналогично, когда пользователь Outlook повторно отбирает элемент в Outlook или повторно отбирает пользователя в области "Люди", обновляется и пользователь. Если срок действия интервала обновления кэша не истек, osC переходит в кэш, чтобы получить сведения для выбранного пользователя. Это позволяет избежать накладных расходов на использование возможности extensibility поставщика OSC для доступа к социальной сети. Если срок действия интервала обновления истек, OSC вызывает метод [ISocialPerson::GetFriendsAndColleagues,](isocialperson-getfriendsandcolleagues.md) чтобы получить сведения текущих друзей для во входившим в систему пользователем, и обновляет кэш в папке контактов. 
  
Поставщик OSC информирует OSC о поддержке кэширования синхронизации друзей, указав следующие элементы в XML **возможностей:** 
  
- **getFriends**  =  **true**
    
- **cacheFriends**  =  **true**
    
- **dynamicContactsLookup**  =  **false**
    
## <a name="on-demand-synchronization"></a>Синхронизация по требованию

Когда пользователь выбирает  новую вкладку "Что нового" в карточке контакта или выбирает другой элемент Outlook или другого пользователя в области "Люди" в Outlook, OSC обновляет карточку контакта или области пользователей соответственно. Если поставщик OSC поддерживает синхронизацию людей или действий по требованию, osC синхронизируется с кэшом в памяти и обновляет сведения, такие как имя, заголовок, рисунок и потоки активности, на карточке контакта или в области людей. В случае синхронизации по требованию, в отличие от кэширования синхронизации, OSC пытается обновить сведения для пользователя независимо от того, является ли этот пользователь другом или не другом во время входа пользователя в социальной сети. 
  
Данные о человеке (или действии) по требованию хранятся только в памяти. Данные в памяти очищаются при закрытии клиентского приложения Office или при обновлении карточки контакта или области "Люди", а данные остаются в памяти дольше интервала обновления. Обратите внимание, что обновление из социальной сети всегда инициалось пользователем, обновляющим карточку контакта или в области "Люди", (например, путем выбора другого пользователя в области "Люди" или выбора другого элемента в окне проводника Outlook). 

Однако обратное не всегда верно — не каждое обновление карточки контакта или области людей обязательно приводит к обновлению из социальной сети. Если пользователь обновляет карточку контакта или области людей, а данные пользователя (или действия) остаются в памяти дольше интервала обновления, OSC вызывает [ISocialSession2::GetPeopleDetails](isocialsession2-getpeopledetails.md) (или [ISocialSession2::GetActivitiesEx)](isocialsession2-getactivitiesex.md)для обновления данных в памяти из социальной сети. Допустимый период для сведений о друге и другом в памяти составляет 24 часа, а для действий — 30 минут. 
  
Одно важное различие между кэшированием и синхронизацией по требованию состоит в том, что синхронизация по требованию может получать сведения о человеке и действиях как для друзей, так и для других пользователей в сети. Если выбранный человек не является другом, OSC обновляет сведения и действия для этого человека, если совмещается одно из следующих требований: 
  
- Пользователь является пользователем в социальной сети и разрешает общедоступный просмотр сведений о профилях и действиях.
    
- Пользователь находится в той же сети, что и во входе пользователя в этой социальной сети (например, в той же сети для студентов).
    
Синхронизация людей и действий по требованию приводит к большему объему вызовов поставщика из ядра OSC. Социальные сети должны быть способны обрабатывать повышенные требования к пропускной способности при синхронизации по требованию.
  
### <a name="specifying-xml-elements-for-on-demand-synchronization"></a>Указание элементов XML для синхронизации по требованию

Поставщик OSC сообщает OSC, что он поддерживает синхронизацию друзей и других по требованию, указав следующие элементы **в** XML возможностей: 
  
- **getFriends**  =  **true**
    
- **cacheFriends**  =  **false**
    
- **dynamicContactsLookup**  =  **true**
    
Поставщик OSC сообщает OSC, что он поддерживает синхронизацию действий по требованию, указав следующие элементы в XML **возможностей:** 
  
- **getActivities**  =  **true**
    
- **cacheActivities**  =  **false**
    
- **dynamicActivitiesLookupEx**  =  **true**
    
## <a name="hybrid-synchronization"></a>Гибридная синхронизация

Поставщик OSC может поддерживать гибридную синхронизацию друзей и других. Это позволяет оптимизировать вызовы между ядром OSC и поставщиком OSC, вызовы социальной сети для синхронизации друзей по требованию, а также валюту данных друзей. Минимальное время хранения данных в папке или памяти (если применимо) равно ограничениям в режимах кэширования или синхронизации по требованию.
  
> [!NOTE]
> Начиная с Outlook Social Connector 2013, OSC поддерживает только синхронизацию действий по требованию и больше не поддерживает гибридную синхронизацию действий. 
  
### <a name="hybrid-synchronization-of-friends-and-non-friends"></a>Гибридная синхронизация друзей и других людей

Если поставщик OSC поддерживает гибридную синхронизацию друзей и других, osC делает следующее: 
  
- OsC хранит сведения о друзьях во время входа пользователя в папку контактов для социальных сетей.
    
- OsC хранит сведения о пользователях, не в которые он вошел, в памяти.
    
Поставщик OSC информирует OSC о поддержке гибридной синхронизации друзей и других лиц, указав следующие элементы в XML **возможностей:** 
  
- **getFriends**  =  **true**
    
- **cacheFriends**  =  **true**
    
- **dynamicContactsLookup**  =  **true**
    
## <a name="synchronization-intervals"></a>Интервалы синхронизации

В следующей таблице данная таблица суммирует интервалы синхронизации для сведений друзей и других пользователей между соответствующим кэшом (папкой или памятью) и социальной сетью в зависимости от поддерживаемого режима синхронизации. Для режима гибридной синхронизации обратитесь к строкам режима кэширования для друзей и строке для режима по требованию для других друзей.
  
|**Режим синхронизации для людей**|**Где установлен интервал обновления**|**Минимальное время по умолчанию перед обновлением**|**Переопределения групповой политики**|
|:-----|:-----|:-----|:-----|
|Кэширования данных  <br/> |Настройка в OSC  <br/> |1440 минут (24 часа)  <br/> |Значение реестра Windows **NetContactSyncInterval** <br/> |
|Кэширования данных  <br/> |**Элемент contactSyncRestartInterval** в **XML возможностей**  <br/> |30 минут, если **contactSyncRestartInterval** не задан  <br/> |Значение реестра Windows **contactSyncRestartInterval** <br/> |
|По запросу  <br/> |Настройка в OSC  <br/> |1440 минут (24 часа)  <br/> |Значение реестра Windows **OnlineSearchExpiryTime** <br/> |
   
В следующей таблице суммируются интервалы синхронизации действий друзей и других пользователей между соответствующим кэшом (папкой или памятью) и социальной сетью в зависимости от поддерживаемых режимов синхронизации. 
  
|**Режим синхронизации для действий**|**Где установлен интервал обновления**|**Минимальное время по умолчанию перед обновлением**|**Переопределения групповой политики**|
|:-----|:-----|:-----|:-----|
|По запросу  <br/> |Настройка в OSC  <br/> |30 минут  <br/> |Значение реестра Windows **OnlineSearchExpiryTime** <br/> |
   
Следующие сведения относятся к значениям реестра Windows, указанным в двух таблицах:
  
- Ключ:  `HKEY_CURRENT_USER\Software\Policies\Microsoft\Office\Outlook\SocialConnector`
    
- Значение: значение DWORD от 1 до 10080
    
## <a name="see-also"></a>См. также

- [XML-пример возможностей](capabilities-xml-example.md)  
- [XML для возможностей](xml-for-capabilities.md)
- [Разработка поставщика с помощью схемы OSC XML](developing-a-provider-with-the-osc-xml-schema.md)  
- [Управление Outlook Social Connector с помощью групповой политики](https://support.microsoft.com/default.aspx?scid=kb%3Ben-US%3B2020103)

