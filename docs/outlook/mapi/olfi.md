---
title: OLFI
manager: soliver
ms.date: 11/16/2014
ms.audience: Developer
ms.topic: reference
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 44bfaadf-36f9-bd8e-6158-646533f6849e
description: 'Дата последнего изменения: 23 июля 2011 г.'
ms.openlocfilehash: 027905721b5730b4c3d78f496022b88a8e6b84d6
ms.sourcegitcommit: 8fe462c32b91c87911942c188f3445e85a54137c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "32279755"
---
# <a name="olfi"></a>OLFI

  
  
**Относится к**: Outlook 2013 | Outlook 2016 
  
Очередь структур долгосрочных ИД, используемых поставщиком файлов личных папок (PST) для назначения ИД записи для нового сообщения или папки в автономном режиме.
  
## <a name="quick-info"></a>Краткие сведения

```cpp
typedef struct { 
    ULONG    ulVersion; 
    MAPIUID  muidReserved; 
    ULONG    ulReserved; 
    DWORD    dwAlloc; 
    DWORD    dwNextAlloc; 
    LTID     ltidAlloc; 
    LTID     ltidNextAlloc; 
} OLFI, *POLFI;
```

## <a name="members"></a>Элементы

 _ulVersion_
  
- Номер версии структуры. 
    
 _muidReserved_
  
- Этот член зарезервирован для внутреннего использования Outlook и не поддерживается.
    
 _ulReserved_
  
- Этот член зарезервирован для внутреннего использования Outlook и не поддерживается.
    
 _dwAlloc_
  
- Количество записей, доступных для выделения. Эти записи имеют один и тот же глобальный уникальный идентификатор (GUID).
    
 _dwNextAlloc_
  
- Количество записей, доступных далее для выделения. Эти записи имеют один и тот же GUID.
    
 _ltidAlloc_
  
- Структура долгосрочных ИД, **[LTID,](ltid.md)** определяющие запись, доступную в настоящее время для выделения. Структура долгосрочного ИД содержит GUID и индекс, идентифицирующий объект в хранилище. Вместе GUID и индекс могут сформировать уникальный ИД записи для объекта. 
    
 _ltidNextAlloc_
  
- Структура долгосрочных ИД, определяющие следующую доступную запись.
    
## <a name="remarks"></a>Примечания

Идентификатор записи — это четырехбайтовый идентификатор записи MAPI для папки или сообщения. Дополнительные сведения см. в [entryID.](https://msdn.microsoft.com/library/ms836424)
  
Когда поставщик PST-хранения назначает идентификатор записи новому объекту, ему сначала требуется ИДЕНТИФИКАТОР GUID, определяя сервер, и индекс, идентифицируя объект в хранилище. Хотя GUID не является уникальным для всех ИД записей, guID и индекс в сочетании предоставляют уникальную запись. Эта пара GUID и индекса отслеживается по долгосрочной структуре **ID, LTID,** которая является частью **структуры OLFI.** 
  
Поставщик PST-хранения физически не сохраняет в **OLFI** **структуру LTID** для каждой пары GUID-index. Он сохраняет одну **структуру LTID,**  *ltidAlloc,*  для первой доступной в настоящее время пары GUID-index; число ,  *dwAlloc*  , количество доступных записей, которые имеют один и тот же GUID; и вторая **структура LTID,**  *ltidNextAlloc,*  для следующей доступной пары GUID-index с другим GUID. Поставщик PST-хранения использует структуру **OLFI** для отслеживания переданных им GUID и индексов. На виртуальном уровне поставщик сохраняет резерв нескольких структур **LTID,** готовых к выделению.  *dwAlloc* поддерживает количество доступных структур **LTID.** 
  
Запросы на ввод ИД приходят в блоках. При запросе блокировки поставщик PST-магазина проверяет наличие достаточного резерва, сравнивая запрашиваемые размеры с *dwAlloc.* Если резерва достаточно, он возвращает GUID и индекс  *в ltidAlloc для*  выделения. Затем он уменьшает  *dwAlloc*  на запрашиваемую величину и приращение индекса  *в ltidAlloc*  на запрашиваемую величину. Это подготавливает поставщика ltidAlloc к выделению  *ltidAlloc*  в следующем запросе для другого блока ID записей. Обратите внимание, что GUID для следующего запроса остается таким же. 
  
Если размер запроса превышает  *dwAlloc,*  поставщик PST-магазина пытается использовать то, что у него есть в резерве, как указано  *в dwNextAlloc*  и  *ltidNextAlloc*  . Он копирует  *dwNextAlloc*  и  *ltidNextAlloc*  в  *dwAlloc*  и  *ltidAlloc*  соответственно, а также устанавливает  *для dwNextAlloc*  и  *ltidNextAlloc*  nULL. 
  
Поставщик, который обтекает поставщика PST-магазина, должен периодически проверять  *ltidNextAlloc,*  чтобы узнать, имеет ли он NULL. В этом случае поставщик должен заполнить его новым GUID и сбросить  *dwNextAlloc,*  чтобы можно было выделить дополнительные ИД записей. 
  
## <a name="see-also"></a>См. также



[Сведения об API репликации](about-the-replication-api.md)
  
[Сведения о конечном автомате репликации](about-the-replication-state-machine.md)
  
[LTID](ltid.md)

