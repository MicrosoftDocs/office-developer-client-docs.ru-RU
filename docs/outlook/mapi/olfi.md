---
title: OLFI
manager: soliver
ms.date: 11/16/2014
ms.audience: Developer
ms.topic: reference
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 44bfaadf-36f9-bd8e-6158-646533f6849e
description: 'Дата последнего изменения: 23 июля 2011 г.'
ms.openlocfilehash: 027905721b5730b4c3d78f496022b88a8e6b84d6
ms.sourcegitcommit: 8fe462c32b91c87911942c188f3445e85a54137c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "32279755"
---
# <a name="olfi"></a>OLFI

  
  
**Относится к**: Outlook 2013 | Outlook 2016 
  
Очередь долгосрочных ИДЕНТИФИКАТОРов, используемых поставщиком хранилища файлов личных папок (PST) для назначения идентификатора записи для нового сообщения или папки в автономном режиме.
  
## <a name="quick-info"></a>Краткие сведения

```cpp
typedef struct { 
    ULONG    ulVersion; 
    MAPIUID  muidReserved; 
    ULONG    ulReserved; 
    DWORD    dwAlloc; 
    DWORD    dwNextAlloc; 
    LTID     ltidAlloc; 
    LTID     ltidNextAlloc; 
} OLFI, *POLFI;
```

## <a name="members"></a>Элементы

 _улверсион_
  
- Номер версии структуры. 
    
 _муидресервед_
  
- Этот член зарезервирован для внутреннего использования в Outlook и не поддерживается.
    
 _улресервед_
  
- Этот член зарезервирован для внутреннего использования в Outlook и не поддерживается.
    
 _дваллок_
  
- Число записей, доступных для выделения. Эти записи используют один глобальный уникальный идентификатор (GUID).
    
 _двнексталлок_
  
- Число записей, доступных для размещения рядом. Эти записи используют один GUID.
    
 _лтидаллок_
  
- Длинная структура ИДЕНТИФИКАТОРов **[лтид](ltid.md)**, определяющая запись, доступную в данный момент для выделения. Долгосрочная структура идентификатора содержит GUID и индекс, идентифицирующий объект в хранилище. Вместе идентификатор GUID и индекс могут иметь уникальный идентификатор записи для объекта. 
    
 _лтиднексталлок_
  
- Длинная структура ИДЕНТИФИКАТОРов терминов, определяющая следующую доступную запись.
    
## <a name="remarks"></a>Примечания

Идентификатор записи — это 4-байтовый идентификатор записи MAPI для папки или сообщения. Дополнительные сведения [см.](https://msdn.microsoft.com/library/ms836424)
  
Когда поставщик PST-хранилища назначает идентификатор записи новому объекту, ему сначала требуется идентификатор GUID, идентифицирующий сервер, и индекс, который определяет объект в хранилище. Несмотря на то, что идентификатор GUID не уникален для всех идентификаторов записей, GUID и комбинированный индекс предоставляют уникальную запись. Этот идентификатор GUID и эта комбинация индекса отслеживаются с помощью долгосрочной структуры ИДЕНТИФИКАТОРов, **лтид**, которая является частью структуры **олфи** . 
  
Поставщик хранилища PST не сохраняет **олфи** структуру **лтид** для каждой из этих комбинаций GUID-index. Он сохраняет одну структуру **лтид** , *лтидаллок* для первой доступной в текущий момент связывания GUID и индекса; число, *дваллок* , количество доступных записей, которые совместно используют этот GUID; Вторая структура **лтид** , *лтиднексталлок* для следующего доступного ключа GUID-index с другим GUID. Поставщик PST-хранилища использует структуру **олфи** для отслеживания идентификаторов GUID и индексов, которые он передают. На виртуальном уровне поставщик поддерживает резервное число структур **лтид** , готовых к выделению.  *дваллок* поддерживает количество доступных структур **лтид** . 
  
Запросы для идентификаторов записей поступают в блоки. При наличии запроса на блокировку поставщик хранилища PST проверяет, достаточно ли резерва, сравнив запрошенный размер с *дваллок* . При наличии достаточного резервирования он возвращает GUID и индекс в *лтидаллок* для выделения. Затем он уменьшает *дваллок* по запрошенному размеру и увеличивает индекс в *лтидаллок* на запрошенный размер. При этом поставщик хранилища PST подготавливается к выделению *лтидаллок* при следующем запросе для другого блока идентификаторов записи. Обратите внимание, что GUID для следующего запроса остается прежним. 
  
Если размер запроса превышает *дваллок* , поставщик PST-хранилища пытается использовать его в резервировании, как указано в *двнексталлок* и *лтиднексталлок* . Он копирует *двнексталлок* и *лтиднексталлок* в *дваллок* и *Лтидаллок* , соответственно, и задает для *двнексталлок* и *лтиднексталлок* значение null. 
  
Поставщик, который включает в себя оболочку поставщика хранилища PST, должен периодически проверять *лтиднексталлок* , чтобы проверить, имеет ли он значение null. Если это так, поставщик должен заполнить его новым GUID и сбросить *двнексталлок* , чтобы можно было выделить дополнительные идентификаторы записи. 
  
## <a name="see-also"></a>См. также



[Сведения об API репликации](about-the-replication-api.md)
  
[Сведения о конечном автомате репликации](about-the-replication-state-machine.md)
  
[LTID](ltid.md)

