---
title: OLFI
manager: soliver
ms.date: 11/16/2014
ms.audience: Developer
ms.topic: reference
ms.prod: office-online-server
localization_priority: Normal
ms.assetid: 44bfaadf-36f9-bd8e-6158-646533f6849e
description: 'Дата последнего изменения: 23 июля 2011 г.'
ms.openlocfilehash: 027905721b5730b4c3d78f496022b88a8e6b84d6
ms.sourcegitcommit: 8fe462c32b91c87911942c188f3445e85a54137c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "32279755"
---
# <a name="olfi"></a>OLFI

  
  
**Область применения**: Outlook 2013 | Outlook 2016 
  
Очередь долгосрочных структур ID, используемых поставщиком файлов персональных папок (PST) для назначения ID входа для нового сообщения или папки в автономном режиме.
  
## <a name="quick-info"></a>Краткие сведения

```cpp
typedef struct { 
    ULONG    ulVersion; 
    MAPIUID  muidReserved; 
    ULONG    ulReserved; 
    DWORD    dwAlloc; 
    DWORD    dwNextAlloc; 
    LTID     ltidAlloc; 
    LTID     ltidNextAlloc; 
} OLFI, *POLFI;
```

## <a name="members"></a>Элементы

 _ulVersion_
  
- Номер версии для структуры. 
    
 _muidReserved_
  
- Этот член зарезервирован для внутреннего использования Outlook и не поддерживается.
    
 _ulReserved_
  
- Этот член зарезервирован для внутреннего использования Outlook и не поддерживается.
    
 _dwAlloc_
  
- Количество записей, доступных для выделения. Эти записи имеют один и тот же глобальный уникальный идентификатор (GUID).
    
 _dwNextAlloc_
  
- Количество записей, доступных далее для выделения. Эти записи имеют один и тот же GUID.
    
 _ltidAlloc_
  
- Долгосрочная структура ID, **[LTID,](ltid.md)** идентифицирует запись, доступную в настоящее время для выделения. Структура долгосрочного ID содержит GUID и индекс, идентифицирующий объект в магазине. Вместе GUID и индекс могут сформировать уникальный ID входа для объекта. 
    
 _ltidNextAlloc_
  
- Долгосрочная структура идентификации, определяемая следующей доступной записью.
    
## <a name="remarks"></a>Примечания

Идентификатор входа — это идентификатор записи MAPI с 4-byte для папки или сообщения. Дополнительные сведения см. в [записи ENTRYID.](https://msdn.microsoft.com/library/ms836424)
  
Когда поставщик PST-магазина назначает идентификатор входа новому объекту, сначала ему требуется GUID, идентифицирует сервер, и индекс, который идентифицирует объект в магазине. Несмотря на то, что GUID не является уникальным для всех ID-записей, GUID и комбинированный индекс предоставляют уникальную запись. Эта пара GUID и индекса отслеживается долгосрочной структурой **ID, LTID,** которая является частью **структуры OLFI.** 
  
Поставщик магазинов PST физически не сохраняет в **OLFI** **структуру LTID** для каждой пары GUID-index. Он сохраняет одну **структуру LTID,**  *ltidAlloc,*  для первой доступной в настоящее время пары GUID-index; количество,  *dwAlloc*  , из числа доступных записей, которые разделяют этот же GUID; и вторая **структура LTID,**  *ltidNextAlloc,*  для следующей доступной пары GUID-index, которая имеет другой GUID. Поставщик магазина PST использует **структуру OLFI** для отслеживания переданных им GUID-интерфейсов и индексов. На виртуальном уровне поставщик сохраняет резерв нескольких структур **LTID,** которые готовы к выделению.  *dwAlloc* поддерживает количество доступных **структур LTID.** 
  
Запросы на входные ИД приходят в блоки. При запросе блокировки поставщик магазинов PST проверяет наличие достаточного резерва, сравнив запрашиваемого размера с *dwAlloc.* Если резерва достаточно, он возвращает GUID и индекс в  *ltidAlloc*  для выделения. Затем он уменьшает  *dwAlloc*  на запрашиваемом размере и прибавка индекса  *в ltidAlloc*  на запрашиваемом размере. Это подготавливает поставщика магазинов PST к выделению  *ltidAlloc*  на следующий запрос для другого блока ID записи. Обратите внимание, что GUID остается таким же для следующего запроса. 
  
Если размер запроса больше, чем  *dwAlloc,*  поставщик магазинов PST пытается использовать то, что имеет следующий в резерве, как указано  *dwNextAlloc*  и  *ltidNextAlloc*  . Он копирует  *dwNextAlloc*  и  *ltidNextAlloc*  соответственно  *dwAlloc*  и  *ltidAlloc*  и задает  *dwNextAlloc*  и  *ltidNextAlloc*  nULL. 
  
Поставщик, который обертывал поставщика магазинов PST, должен периодически проверять  *ltidNextAlloc,*  чтобы узнать, является ли он NULL. Если это так, поставщик должен заполнить его новым GUID и сбросить  *dwNextAlloc,*  чтобы можно было выделить дополнительные ID-записи. 
  
## <a name="see-also"></a>См. также



[Сведения об API репликации](about-the-replication-api.md)
  
[Сведения о конечном автомате репликации](about-the-replication-state-machine.md)
  
[LTID](ltid.md)

