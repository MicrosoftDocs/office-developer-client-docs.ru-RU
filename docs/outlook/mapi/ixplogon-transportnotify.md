---
title: иксплогонтранспортнотифи
manager: soliver
ms.date: 11/16/2014
ms.audience: Developer
ms.topic: reference
ms.prod: office-online-server
localization_priority: Normal
api_name:
- IXPLogon.TransportNotify
api_type:
- COM
ms.assetid: c712fc17-f436-41cf-9aa3-186c9a86d56e
description: 'Дата последнего изменения: 23 июля 2011 г.'
ms.openlocfilehash: 2482dc39d3f1d1568b45dd3de88358e08d190be4
ms.sourcegitcommit: 8657170d071f9bcf680aba50b9c07f2a4fb82283
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "33428860"
---
# <a name="ixplogontransportnotify"></a>IXPLogon::TransportNotify

**Относится к**: Outlook 2013 | Outlook 2016 
  
Сигнализирует о возникновении события, о котором было запрошено уведомление поставщика транспорта.
  
```cpp
HRESULT TransportNotify(
  ULONG FAR * lpulFlags,
  LPVOID FAR * lppvData
);
```

## <a name="parameters"></a>Параметры

 _лпулфлагс_
  
> [вход, выход] Битовая маска флагов, которая сигнализирует о событиях уведомления. Следующие флаги могут устанавливаться диспетчером MAPI на входных данных и должны возвращаться без изменений при выходе:
    
NOTIFY_ABORT_DEFERRED 
  
> Уведомляет поставщик транспорта о том, что сообщение, для которого принята ответственность, откладывается. Этот флаг должен поддерживать только те поставщики транспорта, которые поддерживают РБП. Параметр _лппвдата_ указывает на идентификатор отмененного сообщения. Сообщения, которые не обрабатывали Диспетчер очереди MAPI, по-прежнему могут быть отложены вызовом метода [IMsgStore:: абортсубмит](imsgstore-abortsubmit.md) . 
    
NOTIFY_BEGIN_INBOUND 
  
> Теперь Диспетчер очереди MAPI может принимать входящие сообщения для этого сеанса поставщика транспорта. Диспетчер очереди MAPI регулярно вызывает метод [иксплогон::P олл](ixplogon-poll.md) , если поставщик транспорта устанавливает флаг LOGON_SP_POLL с вызовом [Иксппровидер:: транспортлогон](ixpprovider-transportlogon.md) при входе. После установки флага NOTIFY_BEGIN_INBOUND Диспетчер очереди MAPI принимает флаг NOTIFY_NEWMAIL, передаваемый в вызове метода [имаписуппорт:: спулернотифи](imapisupport-spoolernotify.md) . Прежде чем возвратить строку таблицы состояний для сеанса поставщика транспорта, необходимо обновить ее, вызвав метод [имаписуппорт:: модифистатусров](imapisupport-modifystatusrow.md) . Флаги NOTIFY_BEGIN_INBOUND и NOTIFY_END_INBOUND являются взаимоисключающими. 
    
NOTIFY_BEGIN_INBOUND_FLUSH 
  
> Сообщает поставщику транспорта, что необходимо как можно быстрее циклически переключать входящие сообщения. Чтобы обеспечить соответствие этому уведомлению, поставщик транспорта должен установить флаг STATUS_INBOUND_FLUSH в свойстве **PR_STATUS_CODE** ([PidTagStatusCode](pidtagstatuscode-canonical-property.md)) строки таблицы состояний как можно скорее, с помощью **модифистатусров**. Цикл входящего обмена сообщениями завершается, когда поставщик определяет, что он загрузил все, может или когда он получил вызов метода **транспортнотифи** с установленным флагом NOTIFY_END_INBOUND_FLUSH. До завершения цикла входящих сообщений поставщик не должен вызывать метод [имаписуппорт:: спулериелд](imapisupport-spooleryield.md) или иным образом доставлять циклы операционной системы для ускорения доставки входящих сообщений. Это допустимо, так как диспетчер очереди MAPI обычно использует NOTIFY_BEGIN_INBOUND_FLUSH только в ответ на запрос пользователя с помощью клиентского приложения для доставки всех сообщений сейчас. В конце входящей операции очистки поставщик должен использовать **спулернотифи** для очистки флага STATUS_INBOUND_FLUSH в свойстве **PR_STATUS_CODE** строки состояния. 
    
NOTIFY_BEGIN_OUTBOUND 
  
> Исходящие операции теперь могут быть выполнены для этого сеанса поставщика транспорта. Если для этого поставщика требуется отправить сообщения, вызывается метод [иксплогон:: субмитмессаже](ixplogon-submitmessage.md) . Перед возвратом необходимо обновить строку таблицы состояния для этого сеанса. Флаги NOTIFY_BEGIN_OUTBOUND и NOTIFY_END_OUTBOUND являются взаимоисключающими. 
    
NOTIFY_BEGIN_OUTBOUND_FLUSH 
  
> Работает так же, как и флаг NOTIFY_BEGIN_INBOUND_FLUSH, но относится к исходящим сообщениям. Соответствующий флаг состояния STATUS_OUTBOUND_FLUSH.
    
NOTIFY_CANCEL_MESSAGE 
  
> Диспетчер очереди MAPI должен отменить передачу сообщения, для которого параметр _лппвдата_ указывает на значение 32 бит из вызова метода **Иксплогон:: субмитмессаже** . Флаг NOTIFY_CANCEL_MESSAGE можно задать без поставщика транспорта, который возвращает значение **субмитмессаже**, **Иксплогон:: стартмессаже**или **иксплогон:: ендмессаже** , связанное с сообщением. Поставщик транспорта должен возвращаться как можно скорее из точки входа, которая обрабатывает отмененное сообщение. Для входящего сообщения, которое обрабатывается в данный момент, поставщик транспорта должен сохранить входящее сообщение везде, где оно хранится, и повторно доставить его в следующее удобное время. Данные объекта сообщения, уже сохраненные для входящего сообщения, отбрасываются. Если поставщик транспорта не обновил это 32-разрядное значение **стартмессаже** или **субмитмессаже** , значение равно 0 для исходящих сообщений и 1 для входящих сообщений. 
    
NOTIFY_END_INBOUND 
  
> Входящие операции должны прекратиться для этого сеанса поставщика транспорта. Диспетчер очереди MAPI перестает использовать метод **poll** и игнорирует NOTIFY_NEWMAIL для этого сеанса. Обрабатываемые сообщения должны быть завершены. Необходимо обновить строку таблицы состояния для транспортного сеанса, вызвав [модифистатусров](imapisupport-modifystatusrow.md) перед возвратом. Флаги NOTIFY_END_INBOUND и NOTIFY_BEGIN_INBOUND являются взаимоисключающими. 
    
NOTIFY_END_INBOUND_FLUSH 
  
> Уведомляет поставщик транспорта о выходе из режима входящего сброса. Поставщик транспорта не должен остановить загрузку, но необходимо выполнить загрузку в фоновом режиме. Обновите строку таблицы состояний для сеанса транспорта, вызвав **модифистатусров** , когда поставщик транспорта может соответствовать этому уведомлению. 
    
NOTIFY_END_OUTBOUND 
  
> Исходящие операции для этого сеанса поставщика транспорта должны прекратить работу. Диспетчер очереди MAPI перестает вызывать **субмитмессаже** и игнорирует флаг NOTIFY_READYTOSEND **спулернотифи** . Если в данный момент отправляются исходящие сообщения, оно не должно быть остановлено; чтобы остановить доставку сообщения, используйте флаг NOTIFY_CANCEL_MESSAGE. Строку таблицы состояний для этого сеанса следует обновить, вызвав **модифистатусров** перед возвратом. Флаги NOTIFY_END_INBOUND и NOTIFY_BEGIN_OUTBOUND являются взаимоисключающими. 
    
NOTIFY_END_OUTBOUND_FLUSH 
  
> Работает так же, как NOTIFY_END_INBOUND_FLUSH, но относится к исходящим сообщениям. Соответствующий флаг состояния STATUS_OUTBOUND_FLUSH.
    
 _лппвдата_
  
> вышли Указатель на указатель на данные, зависящие от события. Дополнительные сведения о том, что _лппвдата_ указывает, приведены в описании параметра _лпулфлагс_ . 
    
## <a name="return-value"></a>Возвращаемое значение

S_OK 
  
> Вызов выполнен успешно и вернул ожидаемое значение или значения.
    
## <a name="remarks"></a>Примечания

Диспетчер очереди MAPI вызывает метод **иксплогон:: транспортнотифи** , чтобы сообщить поставщику транспорта о событиях, для которых было запрошено уведомление. Эти события включают в себя запрос очереди MAPI для отмены передачи сообщений, начала или завершения входящих или исходящих операций транспорта, а также начала или завершения операции для очистки входящей или исходящей очереди сообщений. 
  
Когда пользователь попытается отменить сообщение о том, что поставщик транспорта был ранее отложен, диспетчер очереди MAPI вызывает **транспортнотифи**, передавая в _ulFlags_флаги NOTIFY_ABORT_DEFERRED и NOTIFY_CANCEL_MESSAGE. Если диспетчер очереди MAPI выходит из системы и по-прежнему имеет сообщения в очереди, он передается только NOTIFY_ABORT_DEFERRED в _ulFlags_ при вызове **транспортнотифи**.
  
## <a name="notes-to-implementers"></a>Примечания для исполнителей

Поставщик должен синхронизировать доступ к его данным при этом вызове, так как диспетчер очереди MAPI может вызывать этот метод из другого потока выполнения или из процедуры для другого окна. Обычно это происходит, когда диспетчер очереди MAPI передает сообщение об отмене сообщения, которое он начал отправил.
  
## <a name="see-also"></a>См. также

- [IMAPISupport::SpoolerNotify](imapisupport-spoolernotify.md) 
- [IMAPISupport::SpoolerYield](imapisupport-spooleryield.md) 
- [IMsgStore::AbortSubmit](imsgstore-abortsubmit.md) 
- [IXPLogon::EndMessage](ixplogon-endmessage.md) 
- [IXPLogon::Poll](ixplogon-poll.md)
- [IXPLogon::StartMessage](ixplogon-startmessage.md)
- [IXPLogon::SubmitMessage](ixplogon-submitmessage.md)
- [IXPProvider::TransportLogon](ixpprovider-transportlogon.md)
- [IXPLogon : IUnknown](ixplogoniunknown.md)

