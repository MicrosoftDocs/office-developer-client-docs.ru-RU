---
title: Иксплогонтранспортнотифи
manager: soliver
ms.date: 11/16/2014
ms.audience: Developer
ms.topic: reference
ms.prod: office-online-server
localization_priority: Normal
api_name:
- IXPLogon.TransportNotify
api_type:
- COM
ms.assetid: c712fc17-f436-41cf-9aa3-186c9a86d56e
description: 'Дата последнего изменения: 23 июля 2011 г.'
ms.openlocfilehash: 2482dc39d3f1d1568b45dd3de88358e08d190be4
ms.sourcegitcommit: 8657170d071f9bcf680aba50b9c07f2a4fb82283
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "33428860"
---
# <a name="ixplogontransportnotify"></a>IXPLogon::TransportNotify

**Относится к**: Outlook 2013 | Outlook 2016 
  
Сигнализирует о возникновении события, о котором было запрошено уведомление поставщика транспорта.
  
```cpp
HRESULT TransportNotify(
  ULONG FAR * lpulFlags,
  LPVOID FAR * lppvData
);
```

## <a name="parameters"></a>Параметры

 _Лпулфлагс_
  
> [вход, выход] Битовая маска флагов, которая сигнализирует о событиях уведомления. Следующие флаги могут устанавливаться диспетчером MAPI на входных данных и должны возвращаться без изменений при выходе:
    
НОТИФИ_АБОРТ_ДЕФЕРРЕД 
  
> Уведомляет поставщик транспорта о том, что сообщение, для которого принята ответственность, откладывается. Этот флаг должен поддерживать только те поставщики транспорта, которые поддерживают РБП. Параметр _лппвдата_ указывает на идентификатор отмененного сообщения. Сообщения, которые не обрабатывали Диспетчер очереди MAPI, по-прежнему могут быть отложены вызовом метода [IMsgStore:: абортсубмит](imsgstore-abortsubmit.md) . 
    
НОТИФИ_БЕГИН_ИНБАУНД 
  
> Теперь Диспетчер очереди MAPI может принимать входящие сообщения для этого сеанса поставщика транспорта. Диспетчер очереди MAPI регулярно вызывает метод [иксплогон::P олл](ixplogon-poll.md) , если поставщик транспорта устанавливает флаг логон_сп_полл с помощью вызова [Иксппровидер:: транспортлогон](ixpprovider-transportlogon.md) при входе. После установки флага НОТИФИ_БЕГИН_ИНБАУНД в диспетчере очереди MAPI учитывается флаг НОТИФИ_НЕВМАИЛ, передаваемый в вызове метода [имаписуппорт:: спулернотифи](imapisupport-spoolernotify.md) . Прежде чем возвратить строку таблицы состояний для сеанса поставщика транспорта, необходимо обновить ее, вызвав метод [имаписуппорт:: модифистатусров](imapisupport-modifystatusrow.md) . Флаги НОТИФИ_БЕГИН_ИНБАУНД и НОТИФИ_ЕНД_ИНБАУНД являются взаимоисключающими. 
    
НОТИФИ_БЕГИН_ИНБАУНД_ФЛУШ 
  
> Сообщает поставщику транспорта, что необходимо как можно быстрее циклически переключать входящие сообщения. Чтобы обеспечить соответствие этому уведомлению, поставщик транспорта должен установить флаг СТАТУС_ИНБАУНД_ФЛУШ в свойстве **пр_статус_коде** ([PidTagStatusCode](pidtagstatuscode-canonical-property.md)) своей строки таблицы состояний, как только это может сделать, с помощью **модифистатусров**. Цикл входящего обмена сообщениями завершается, когда поставщик определяет, что он загрузил все, может или когда он получил вызов метода **транспортнотифи** с установленным флагом нотифи_енд_инбаунд_флуш. До завершения цикла входящих сообщений поставщик не должен вызывать метод [имаписуппорт:: спулериелд](imapisupport-spooleryield.md) или иным образом доставлять циклы операционной системы для ускорения доставки входящих сообщений. Это допустимо, так как диспетчер очереди MAPI обычно использует НОТИФИ_БЕГИН_ИНБАУНД_ФЛУШ только в ответ на запрос пользователя с помощью клиентского приложения для доставки всех сообщений сейчас. В конце входящей операции очистки поставщик должен использовать **спулернотифи** для очистки флага статус_инбаунд_флуш в свойстве " **пр_статус_коде** " строки состояния. 
    
НОТИФИ_БЕГИН_АУТБАУНД 
  
> ИсХодящие операции теперь могут быть выполнены для этого сеанса поставщика транспорта. Если для этого поставщика требуется отправить сообщения, вызывается метод [иксплогон:: субмитмессаже](ixplogon-submitmessage.md) . Перед возвратом необходимо обновить строку таблицы состояния для этого сеанса. Флаги НОТИФИ_БЕГИН_АУТБАУНД и НОТИФИ_ЕНД_АУТБАУНД являются взаимоисключающими. 
    
НОТИФИ_БЕГИН_АУТБАУНД_ФЛУШ 
  
> Действует аналогично флагу НОТИФИ_БЕГИН_ИНБАУНД_ФЛУШ, но относится к исходящим сообщениям. Соответствующий флаг состояния — СТАТУС_АУТБАУНД_ФЛУШ.
    
НОТИФИ_КАНЦЕЛ_МЕССАЖЕ 
  
> Диспетчер очереди MAPI должен отменить передачу сообщения, для которого параметр _лппвдата_ указывает на значение 32 бит из вызова метода **Иксплогон:: субмитмессаже** . Флаг НОТИФИ_КАНЦЕЛ_МЕССАЖЕ можно задать без поставщика транспорта, который возвращает значение **субмитмессаже**, **Иксплогон:: стартмессаже**или **иксплогон:: ендмессаже** , связанное с сообщением. Поставщик транспорта должен возвращаться как можно скорее из точки входа, которая обрабатывает отмененное сообщение. Для входящего сообщения, которое обрабатывается в данный момент, поставщик транспорта должен сохранить входящее сообщение везде, где оно хранится, и повторно доставить его в следующее удобное время. Данные объекта сообщения, уже сохраненные для входящего сообщения, отбрасываются. Если поставщик транспорта не обновил это 32-разрядное значение **стартмессаже** или **субмитмессаже** , значение равно 0 для исходящих сообщений и 1 для входящих сообщений. 
    
НОТИФИ_ЕНД_ИНБАУНД 
  
> Входящие операции должны прекратиться для этого сеанса поставщика транспорта. Диспетчер очереди MAPI перестает использовать метод **poll** и игнорирует нотифи_невмаил для этого сеанса. Обрабатываемые сообщения должны быть завершены. Необходимо обновить строку таблицы состояния для транспортного сеанса, вызвав [модифистатусров](imapisupport-modifystatusrow.md) перед возвратом. Флаги НОТИФИ_ЕНД_ИНБАУНД и НОТИФИ_БЕГИН_ИНБАУНД являются взаимоисключающими. 
    
НОТИФИ_ЕНД_ИНБАУНД_ФЛУШ 
  
> Уведомляет поставщик транспорта о выходе из режима входящего сброса. Поставщик транспорта не должен остановить загрузку, но необходимо выполнить загрузку в фоновом режиме. Обновите строку таблицы состояний для сеанса транспорта, вызвав **модифистатусров** , когда поставщик транспорта может соответствовать этому уведомлению. 
    
НОТИФИ_ЕНД_АУТБАУНД 
  
> ИсХодящие операции для этого сеанса поставщика транспорта должны прекратить работу. Диспетчер очереди MAPI перестает вызывать **субмитмессаже** и игнорирует флаг **спулернотифи** нотифи_реадитосенд. Если в данный момент отправляются исходящие сообщения, оно не должно быть остановлено; чтобы остановить доставку сообщения, используйте флаг НОТИФИ_КАНЦЕЛ_МЕССАЖЕ. Строку таблицы состояний для этого сеанса следует обновить, вызвав **модифистатусров** перед возвратом. Флаги НОТИФИ_ЕНД_ИНБАУНД и НОТИФИ_БЕГИН_АУТБАУНД являются взаимоисключающими. 
    
НОТИФИ_ЕНД_АУТБАУНД_ФЛУШ 
  
> Работает так же, как и НОТИФИ_ЕНД_ИНБАУНД_ФЛУШ, но относится к исходящим сообщениям. Соответствующий флаг состояния — СТАТУС_АУТБАУНД_ФЛУШ.
    
 _Лппвдата_
  
> вышли Указатель на указатель на данные, зависящие от события. Дополнительные сведения о том, что _лппвдата_ указывает, приведены в описании параметра _лпулфлагс_ . 
    
## <a name="return-value"></a>Возвращаемое значение

S_OK 
  
> Вызов выполнен успешно и вернул ожидаемое значение или значения.
    
## <a name="remarks"></a>Примечания

Диспетчер очереди MAPI вызывает метод **иксплогон:: транспортнотифи** , чтобы сообщить поставщику транспорта о событиях, для которых было запрошено уведомление. Эти события включают в себя запрос очереди MAPI для отмены передачи сообщений, начала или завершения входящих или исходящих операций транспорта, а также начала или завершения операции для очистки входящей или исходящей очереди сообщений. 
  
Когда пользователь пытается отменить сообщение о том, что поставщик транспорта был ранее отложен, диспетчер очереди MAPI вызывает **транспортнотифи**, передавая флаги НОТИФИ_АБОРТ_ДЕФЕРРЕД и Нотифи_канцел_мессаже в _ulFlags_. Если диспетчер очереди MAPI выходит из системы и все сообщения по-прежнему находятся в очереди, он передает только НОТИФИ_АБОРТ_ДЕФЕРРЕД в _ulFlags_ при вызове **транспортнотифи**.
  
## <a name="notes-to-implementers"></a>Примечания для исполнителей

Поставщик должен синхронизировать доступ к его данным при этом вызове, так как диспетчер очереди MAPI может вызывать этот метод из другого потока выполнения или из процедуры для другого окна. Обычно это происходит, когда диспетчер очереди MAPI передает сообщение об отмене сообщения, которое он начал отправил.
  
## <a name="see-also"></a>См. также

- [IMAPISupport::SpoolerNotify](imapisupport-spoolernotify.md) 
- [IMAPISupport::SpoolerYield](imapisupport-spooleryield.md) 
- [IMsgStore::AbortSubmit](imsgstore-abortsubmit.md) 
- [IXPLogon::EndMessage](ixplogon-endmessage.md) 
- [IXPLogon::Poll](ixplogon-poll.md)
- [IXPLogon::StartMessage](ixplogon-startmessage.md)
- [IXPLogon::SubmitMessage](ixplogon-submitmessage.md)
- [IXPProvider::TransportLogon](ixpprovider-transportlogon.md)
- [IXPLogon : IUnknown](ixplogoniunknown.md)

