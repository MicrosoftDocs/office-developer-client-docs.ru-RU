---
title: Сведения об URL-адресах MAPI для индексирования на основе уведомлений
manager: soliver
ms.date: 11/16/2014
ms.audience: Developer
localization_priority: Normal
ms.assetid: 9cb35f0a-267e-2d85-1701-02d52578a0b8
description: 'Последнее изменение: 08 ноября 2011 г.'
ms.openlocfilehash: 57868996f95cfb135298378d2638bc57b2e69977
ms.sourcegitcommit: 0cf39e5382b8c6f236c8a63c6036849ed3527ded
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/23/2018
ms.locfileid: "22583675"
---
# <a name="about-mapi-urls-for-notification-based-indexing"></a>Сведения об URL-адресах MAPI для индексирования на основе уведомлений

**Область применения**: Outlook 2013 | Outlook 2016 
  
Когда поставщика хранилища уведомляет индексатора, который будет готов для индексации объекта, он создает MAPI URL-адрес, который уникальным образом определяет объект обработчик протокола MAPI. URL-адреса, MAPI в кодировке Юникод и имеют следующий формат: 
  
`Mapi://SID/StoreDisplayName ($HashNumber)/StoreType/FolderNameA/…/FolderNameN/[EntryIDEncoded[/at=AttachIDEncoded:FileName]]`

В следующей таблице описываются различные части обычный URL-адрес.

|Часть | Описание|
|:----|:-----------|  
|*SID* |Идентификатор безопасности для текущего пользователя.| 
|*StoreDisplayName* |Строка, указывающая отображаемое имя пользователя этого хранилища.|
|*HashNumber* |**Значение DWORD** в шестнадцатеричном представлении, которое вычисляется на основе идентификатор записи хранилища или подписи сопоставления хранилища. Это значение хранится в реестре и будет использоваться для идентификации хранилища в обработчике протокола MAPI более поздней версии.<br/><br/>Этот номер должен рассчитываться, чтобы минимизировать конфликты с других хранилищ. Алгоритм, который использует Microsoft Outlook для расчета количества хэш-функции в разделе [алгоритм для расчета количества хэш-функции хранилища](algorithm-to-calculate-the-store-hash-number.md).|
|*Подготовка* |Номер, идентифицирующий тип хранилища, содержащее объект для индексации. Ниже приведены возможные значения:<br/>-0 - хранилище по умолчанию.<br/><br/>-1 - делегат хранилище, используемое для элементов делегат кэшированы локально.<br/><br/>-2 - общедоступные папки для общей папки "Избранное".<br/><br/>**Примечание**: Если хранилище обходом вместо компьютерах, значение, используемое является символ*X*.| 
|*FolderNameA/.../FolderNameN* |Путь к папке или сообщения из корневой папки IPM_SUBTREE. Например сообщения в папке **"Входящие"** **семейства** имеет **Семейства/папки "Входящие"** для этого параметра. |
|*EntryIDEncoded* |Идентификатор записи MAPI для элемента, помеченные как строку Юникода. В следующем разделе «Специальные символы» сведения о том, как некоторые специальные символы, помеченные. Дополнительные сведения о алгоритм для кодирования идентификатор записи можно [алгоритм для кодирования идентификаторы и идентификаторы вложений](algorithm-to-encode-entry-ids-and-attachment-ids.md).<br/><br/>**Примечание**: при просмотре в виде текста, это закодированный идентификатор отображается как в случайном порядке хангыля или флажки в соответствии с алгоритмом, в зависимости от доступных шрифтов запись.  |
|*AttachIDEncoded* |Идентификатор вложения, помеченные как строку Юникода. В следующем разделе «Специальные символы» сведения о том, как некоторые специальные символы, помеченные. Дополнительные сведения о алгоритм для кодирования идентификатор записи можно [алгоритм для кодирования идентификаторы и идентификаторы вложений](algorithm-to-encode-entry-ids-and-attachment-ids.md).<br/><br/>**Примечание**: при просмотре в виде текста, это закодированный идентификатор отображается как в случайном порядке хангыля или флажки в соответствии с алгоритмом, в зависимости от доступных шрифтов запись. |
|*Имя файла* |Имя вложения файла, как оно отображается в сообщении.|
    
## <a name="examples-of-mapi-urls"></a>Примеры URL-адресов MAPI

Ниже приведены некоторые примеры URL-адресов MAPI.
  
- URL-адрес интерфейса MAPI для папки: 
    
  `mapi://S-1-5-21-2127521184-1604012920-1887927527-71418/Mailbox - Some User ($be19928f)/2/Office`
    
- URL-адрес интерфейса MAPI для сообщения: 
    
  `mapi://S-1-5-21-2127521184-1604012920-1887927527-71418/Mailbox - Some User ($484efb89)/0/Calendar/곯가가가걍걝걌곌겷걢곒갑겛개가검걟곔걙곾걤곂갠가`
    
- URL-адрес интерфейса MAPI для вложения: 
    
  `mapi://S-1-5-21-2127521184-1604012920-1887927527-71418/Mailbox - Some User ($484efb89)/0/Inbox/곯가가가걍걝걌곌겷걢곒갑겛개가검걟곔걙곾간곷갦가/at=겅걋각가:somefile.txt`
    
## <a name="special-characters"></a>Специальные символы

Некоторые символы кодируются, если они отображаются в окне сообщения или вложения. Ниже показано, какие символы кодируются в URL-АДРЕСЕ MAPI:
  
- % > % 25
    
- / > % 2F 
    
- \ > %5 C 
    
- \*> % 2A 
    
- ? > % 3F 
    
## <a name="blob-associated-with-each-mapi-url"></a>Больших двоичных объектов, связанных с каждой URL-адрес MAPI

Когда передача MAPI URL-адрес для объекта для индексации поставщика хранилища также создает больших двоичных объектов (BLOB), содержащий определенные сведения для обработчика протокола MAPI. Поставщик хранения связывает этот больших двоичных ОБЪЕКТОВ с каждого URL-адреса MAPI и отправляет его при передача URL-адрес интерфейса MAPI для компонента индексирования. Формат BLOB выглядит следующим образом: 
  
```cpp
DWORD  dwVersion
DWORD  dwFlags
ULONG  cbProfileName
WCHAR  wszProfileName
ULONG  cbProviderItemID
WCHAR  wszProviderItemID
```

Поставщик хранения необходимо создать эти значения для больших двоичных ОБЪЕКТОВ в указанном порядке. В следующей таблице описаны каждого поля больших двоичных ОБЪЕКТОВ.

|Часть | Описание|
|:----|:-----------|  
|*dwVersion* |Это версия отправляемых данных. В настоящее время это значение равно 1.|
|*dwFlags* |Зарезервировано для последующего использования. В настоящее время это значение должно иметь значение 0.|
|*cbProfileName* |Размер Имя профиля, в байтах. Эти сведения полезен для обработчик протокола MAPI, необходимо знать профиля, который будет использоваться при индексации элемента.|
|*wszProfileName* |Символом NULL Юникод строка, содержащая имя профиля.|
|*cbProviderItemID* |Размер элемента идентификатор поставщика, в байтах. Поставщик хранения следует отправить только поставщик идентификатор элемента для папок, чтобы предотвратить открытие дополнительных папок для получения этой информации.|
|*wszProviderItemID* |Юникод, идентифицирующий с идентификатор поставщика, однозначно идентифицирующее элемент в хранилище.|
    
## <a name="see-also"></a>См. также

- [Индексирование хранилища на основе уведомлений](about-notification-based-store-indexing.md)
- [Константы MAPI](mapi-constants.md)

