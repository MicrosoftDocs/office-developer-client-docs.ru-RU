---
title: Сведения об URL-адресах MAPI для индексирования на основе уведомлений
manager: soliver
ms.date: 11/16/2014
ms.audience: Developer
localization_priority: Normal
ms.assetid: 9cb35f0a-267e-2d85-1701-02d52578a0b8
description: 'Дата последнего изменения: 08 ноября 2011 г.'
ms.openlocfilehash: 5a3e45809f36b71968560a4b239e268addf00474
ms.sourcegitcommit: 8657170d071f9bcf680aba50b9c07f2a4fb82283
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "33422483"
---
# <a name="about-mapi-urls-for-notification-based-indexing"></a>Сведения об URL-адресах MAPI для индексирования на основе уведомлений

**Относится к**: Outlook 2013 | Outlook 2016 
  
Когда поставщик хранилища уведомляет индексатор о готовности объекта к индексированию, он создает URL-адрес MAPI, который уникально идентифицирует объект обработчику протокола MAPI. URL-адреса MAPI кодируются в Юникоде и имеют следующий формат: 
  
`Mapi://SID/StoreDisplayName ($HashNumber)/StoreType/FolderNameA/…/FolderNameN/[EntryIDEncoded[/at=AttachIDEncoded:FileName]]`

В следующей таблице описываются различные части типичного URL-адреса.

|Часть | Описание|
|:----|:-----------|  
|*SID* |Идентификатор безопасности текущего пользователя.| 
|*сторедисплайнаме* |Строка, указывающая отображаемое имя пользователя в этом хранилище.|
|*хашнумбер* |Значение **DWORD** в шестнадцатеричном представлении, которое вычисляется на основе идентификатора записи хранилища или подписи сопоставления хранилища. Это значение хранится в реестре и будет использоваться позже для идентификации хранилища в обработчике протокола MAPI.<br/><br/>Этот номер должен рассчитываться таким образом, чтобы свести к минимуму конфликты с другими хранилищами. Алгоритм, используемый Microsoft Outlook для вычисления хэш-кода, представлен в разделе [алгоритм для вычисления хэш-номера хранилища](algorithm-to-calculate-the-store-hash-number.md).|
|*Флажок* |Число, определяющее тип хранилища, содержащего индексируемый объект. Возможны следующие значения.<br/>— 0 — хранилище по умолчанию.<br/><br/>– 1 — хранилище делегатов, которое используется для кэширования элементов делегатов локально.<br/><br/>— общедоступные папки, используемые для избранных общедоступных папок.<br/><br/>**Note**: Если вместо отправки выполняется обход хранилища, то используется символ*X*.| 
|*Фолдернамеа/.../Фолдернамен* |Путь из корневого каталога IPM_SUBTREE к папке или сообщению. Например, **в папке** **"Входящие" в папке "Входящие** " для этого параметра задано значение **"Входящие" или "семья"** . |
|*ентриденкодед* |Идентификатор записи MAPI для элемента, закодированного как строка Юникода. В следующем разделе "специальные символы" приведены сведения о способе кодирования определенных специальных символов. Дополнительные сведения о алгоритме кодирования идентификатора записи можно узнать [в разделе алгоритм шифрования идентификаторов записей и идентификаторов вложений](algorithm-to-encode-entry-ids-and-attachment-ids.md).<br/><br/>**Note**: при просмотре в виде текста этот идентификатор закодированной записи отображается как произвольные знаки хангыль или поля в соответствии с алгоритмом в зависимости от доступных шрифтов.  |
|*аттачиденкодед* |Идентификатор вложения, закодированный как строка Юникода. В следующем разделе "специальные символы" приведены сведения о способе кодирования определенных специальных символов. Дополнительные сведения о алгоритме кодирования идентификатора записи можно узнать [в разделе алгоритм шифрования идентификаторов записей и идентификаторов вложений](algorithm-to-encode-entry-ids-and-attachment-ids.md).<br/><br/>**Note**: при просмотре в виде текста этот идентификатор закодированной записи отображается как произвольные знаки хангыль или поля в соответствии с алгоритмом в зависимости от доступных шрифтов. |
|*FileName* |Имя файла вложения, как оно отображается в сообщении.|
    
## <a name="examples-of-mapi-urls"></a>Примеры URL-адресов MAPI

Ниже приведено несколько примеров URL-адресов MAPI.
  
- URL-адрес MAPI для папки: 
    
  `mapi://S-1-5-21-2127521184-1604012920-1887927527-71418/Mailbox - Some User ($be19928f)/2/Office`
    
- URL-адрес MAPI для сообщения: 
    
  `mapi://S-1-5-21-2127521184-1604012920-1887927527-71418/Mailbox - Some User ($484efb89)/0/Calendar/곯가가가걍걝걌곌겷걢곒갑겛개가검걟곔걙곾걤곂갠가`
    
- URL-адрес MAPI для вложения: 
    
  `mapi://S-1-5-21-2127521184-1604012920-1887927527-71418/Mailbox - Some User ($484efb89)/0/Inbox/곯가가가걍걝걌곌겷걢곒갑겛개가검걟곔걙곾간곷갦가/at=겅걋각가:somefile.txt`
    
## <a name="special-characters"></a>Специальные символы

Некоторые символы кодируются, если они отображаются в сообщении или в вложении. Ниже показано, какие символы кодируются в URL-адресе MAPI:
  
- % >% 25
    
- />% 2F 
    
- \ >% 5C 
    
- \*>% 2A 
    
- ? >% 3F 
    
## <a name="blob-associated-with-each-mapi-url"></a>Большой двоичный объект, связанный с каждым URL-адресом MAPI

При нажатии URL-адреса MAPI для индексируемого объекта поставщик хранилища также создает большой двоичный объект (BLOB), который содержит определенную информацию для обработчика протокола MAPI. Поставщик хранилища связывает этот большой двоичный объект с каждым URL-адресом MAPI и отправляет его при помещении URL-адреса MAPI в индексатор. Ниже приведен формат большого двоичного объекта. 
  
```cpp
DWORD  dwVersion
DWORD  dwFlags
ULONG  cbProfileName
WCHAR  wszProfileName
ULONG  cbProviderItemID
WCHAR  wszProviderItemID
```

Поставщик магазина должен записать эти значения в большой двоичный объект в указанном порядке. В следующей таблице описываются все поля объекта BLOB.

|Часть | Описание|
|:----|:-----------|  
|*двверсион* |Версия отправляемых данных. В настоящее время задано значение 1.|
|*dwFlags* |Зарезервировано для последующего использования. В настоящее время это значение должно быть равно 0.|
|*кбпрофиленаме* |Размер имени профиля в байтах. Эти сведения помогают обработчику протокола MAPI определить, какой профиль следует использовать при индексации элемента.|
|*всзпрофиленаме* |Строка Юникода с завершающим нулем, которая содержит имя профиля.|
|*кбпровидеритемид* |Размер идентификатора элемента поставщика (в байтах). Поставщик услуг хранения должен отправить только идентификатор элемента поставщика для папок, чтобы предотвратить открытие дополнительных папок для получения этих сведений.|
|*всзпровидеритемид* |Строка Юникода, заканчивающаяся нулем, с ИДЕНТИФИКАТОРом элемента provider, который уникальным образом определяет элемент в хранилище.|
    
## <a name="see-also"></a>См. также

- [Об индексировании хранилищ на основе уведомлений](about-notification-based-store-indexing.md)
- [Константы MAPI](mapi-constants.md)

