---
title: Url-адреса MAPI для Notification-Based индексации
manager: soliver
ms.date: 11/16/2014
ms.audience: Developer
localization_priority: Normal
ms.assetid: 9cb35f0a-267e-2d85-1701-02d52578a0b8
description: 'Last modified: November 08, 2011'
ms.openlocfilehash: 5a3e45809f36b71968560a4b239e268addf00474
ms.sourcegitcommit: 8657170d071f9bcf680aba50b9c07f2a4fb82283
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "33422483"
---
# <a name="about-mapi-urls-for-notification-based-indexing"></a>Url-адреса MAPI для Notification-Based индексации

**Относится к**: Outlook 2013 | Outlook 2016 
  
Когда поставщик магазина сообщает индексатору, что объект готов к индексации, он создает URL-адрес MAPI, который уникальным образом идентифицирует объект в обработщике протокола MAPI. URL-адреса MAPI кодируются в коде Юникод и имеют следующий формат: 
  
`Mapi://SID/StoreDisplayName ($HashNumber)/StoreType/FolderNameA/…/FolderNameN/[EntryIDEncoded[/at=AttachIDEncoded:FileName]]`

В следующей таблице описываются различные части типичного URL-адреса.

|Часть | Описание|
|:----|:-----------|  
|*SID* |Идентификатор безопасности текущего пользователя.| 
|*StoreDisplayName* |Строка, которая указывает отображаемую имя пользователя в этом хранилище.|
|*HashNumber* |A **DWORD** in hexadecimal representation that is calculated based on the store entry ID or the store mapping signature. Это значение хранится в реестре и будет использоваться позже для идентификации магазина в обработчивом протоколе MAPI.<br/><br/>Это число должно быть рассчитано таким образом, чтобы минимизировать конфликты с другими хранилищами. Алгоритм, который Microsoft Outlook использует для вычисления номера hash, см. в подсети [Algorithm to Calculate the Store Hash Number](algorithm-to-calculate-the-store-hash-number.md).|
|*StoreType* |Число, которое определяет тип хранения, содержаного объект для индексации. Возможны следующие значения.<br/>- 0 — хранилище по умолчанию.<br/><br/>- 1 — хранилище делегатов, используемого для элементов делегатов, кэширования локально.<br/><br/>- 2 — общедоступные папки, используемые для избранного общедоступных папок.<br/><br/>**ПРИМЕЧАНИЕ.** Если при обходе магазина вместо его нажатий используется символ *X.*| 
|*FolderNameA/.../FolderNameN* |Путь от корня IPM_SUBTREE к папке или сообщению. Например, для этого параметра сообщение в папке **"Семья"** папки **"Входящие"** имеет папку "Входящие" **или "Семейство".** |
|*EntryIDEncoded* |Код записи MAPI для элемента, закодированный как строка Юникода. Сведения о том, как кодируются определенные специальные символы, см. в следующем разделе "Специальные символы". Дополнительные сведения об алгоритме кодирования кода записи см. в подсети [Algorithm to Encode Entry IDs and Attachment IDs.](algorithm-to-encode-entry-ids-and-attachment-ids.md)<br/><br/>**ПРИМЕЧАНИЕ.** При просмотре в виде текста этот кодированный ИД записи отображается как случайные символы или поля hangul в соответствии с алгоритмом в зависимости от доступных шрифтов.  |
|*AttachIDEncoded* |Код вложения в виде строки Юникода. Сведения о том, как кодируются определенные специальные символы, см. в следующем разделе "Специальные символы". Дополнительные сведения об алгоритме кодирования кода записи см. в подсети [Algorithm to Encode Entry IDs and Attachment IDs.](algorithm-to-encode-entry-ids-and-attachment-ids.md)<br/><br/>**ПРИМЕЧАНИЕ.** При просмотре в виде текста этот кодированный ИД записи отображается как случайные символы или поля hangul в соответствии с алгоритмом в зависимости от доступных шрифтов. |
|*FileName* |Имя файла вложения, которое отображается в сообщении.|
    
## <a name="examples-of-mapi-urls"></a>Примеры URL-адресов MAPI

Ниже приводится несколько примеров URL-адресов MAPI.
  
- URL-адрес MAPI для папки: 
    
  `mapi://S-1-5-21-2127521184-1604012920-1887927527-71418/Mailbox - Some User ($be19928f)/2/Office`
    
- URL-адрес MAPI для сообщения: 
    
  `mapi://S-1-5-21-2127521184-1604012920-1887927527-71418/Mailbox - Some User ($484efb89)/0/Calendar/곯가가가걍걝걌곌겷걢곒갑겛개가검걟곔걙곾걤곂갠가`
    
- URL-адрес MAPI для вложения: 
    
  `mapi://S-1-5-21-2127521184-1604012920-1887927527-71418/Mailbox - Some User ($484efb89)/0/Inbox/곯가가가걍걝걌곌겷걢곒갑겛개가검걟곔걙곾간곷갦가/at=겅걋각가:somefile.txt`
    
## <a name="special-characters"></a>Специальные символы

Некоторые символы кодируются, если они отображаются в сообщении или вложении. Ниже показано, какие символы кодируются в URL-адресе MAPI:
  
- % > %25
    
- / > %2F 
    
- \ > %5C 
    
- \* > %2A 
    
- ? > %3F 
    
## <a name="blob-associated-with-each-mapi-url"></a>BLOB-сайт, связанный с каждым URL-адресом MAPI

При нажатии URL-адреса MAPI для объекта, который необходимо индексировать, поставщик магазина также создает большой двоичный объект (BLOB), который содержит определенные сведения для обработера протокола MAPI. Поставщик магазина связывает этот BLOB-адрес с каждым URL-адресом MAPI и отправляет его при отправке URL-адреса MAPI в индексер. Формат BLOB:: 
  
```cpp
DWORD  dwVersion
DWORD  dwFlags
ULONG  cbProfileName
WCHAR  wszProfileName
ULONG  cbProviderItemID
WCHAR  wszProviderItemID
```

Поставщик магазина должен записать эти значения в BLOB в показанном порядке. В следующей таблице описаны все поля BLOB.

|Часть | Описание|
|:----|:-----------|  
|*dwVersion* |Это версия от отправляется данных. В настоящее время это значение 1.|
|*dwFlags* |Зарезервировано для последующего использования. В настоящее время это значение должно быть 0.|
|*cbProfileName* |Размер имени профиля в ветвях. Эти сведения полезны обработчиве протокола MAPI, чтобы узнать, какой профиль использовать при индексации элемента.|
|*wszProfileName* |Строка Юникод, осекаемая нулью, которая содержит имя профиля.|
|*cbProviderItemID* |Размер ИД элемента поставщика в ветвях. Поставщик магазина должен отправлять только ИД элемента поставщика для папок, чтобы запретить открытие дополнительных папок для получения этой информации.|
|*wszProviderItemID* |Строка Юникод, осекаемая нулью, с идентификатором элемента поставщика, уникальным образом идентифицирует элемент в хранилище.|
    
## <a name="see-also"></a>См. также

- [Об Notification-Based Store](about-notification-based-store-indexing.md)
- [Константы MAPI](mapi-constants.md)

