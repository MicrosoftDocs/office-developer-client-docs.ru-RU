---
title: Сведения о конечном автомате репликации
manager: soliver
ms.date: 03/09/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: cf36c6cb-57b4-7b2b-e23d-e0bc8696de96
description: 'Дата последнего изменения: 9 марта 2015 г.'
ms.openlocfilehash: a0644e4bf5c6847d61cc59e203d50f61ad142e84
ms.sourcegitcommit: 8657170d071f9bcf680aba50b9c07f2a4fb82283
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "33416484"
---
# <a name="about-the-replication-state-machine"></a><span data-ttu-id="8d928-103">Сведения о конечном автомате репликации</span><span class="sxs-lookup"><span data-stu-id="8d928-103">About the Replication State Machine</span></span>

  
  
<span data-ttu-id="8d928-104">**Относится к**: Outlook 2013 | Outlook 2016</span><span class="sxs-lookup"><span data-stu-id="8d928-104">**Applies to**: Outlook 2013 | Outlook 2016</span></span> 
  
<span data-ttu-id="8d928-105">В этой статье представлен обзор конечного автомата для Microsoft Outlook 2013 и репликации данных Microsoft Outlook 2010.</span><span class="sxs-lookup"><span data-stu-id="8d928-105">This topic contains an overview of the state machine for Microsoft Outlook 2013 and Microsoft Outlook 2010 data replication.</span></span>
  
> [!NOTE]
> <span data-ttu-id="8d928-106">API репликации должен быть полностью реализован в соответствии с инструкциями, приведенными в этом разделе, чтобы быть полезной и поддерживаемой.</span><span class="sxs-lookup"><span data-stu-id="8d928-106">The Replication API must be fully implemented according to the instructions in this topic in order to be useful or supported.</span></span> <span data-ttu-id="8d928-107">API репликации доступен исключительно для репликации изменений Outlook 2013 или Outlook 2010 на сервер и с него.</span><span class="sxs-lookup"><span data-stu-id="8d928-107">The Replication API is available exclusively to replicate Outlook 2013 or Outlook 2010 changes to and from a server.</span></span> 
  
## <a name="iostx-and-the-state-machine"></a><span data-ttu-id="8d928-108">ИОСТКС и конечный автомат</span><span class="sxs-lookup"><span data-stu-id="8d928-108">IOSTX and the State Machine</span></span>

<span data-ttu-id="8d928-109">Клиент вызывает **[иосткс:: синкбег](iostx-syncbeg.md)**, **[Иосткс:: синценд](iostx-syncend.md)**, **[Иосткс:: Синчдрбег](iostx-synchdrbeg.md)** и **[иосткс:: синчдренд](iostx-synchdrend.md)** в последовательности для синхронизации папок и элементов Outlook 2013 и Outlook 2010 между локальным хранилищем и сервером.</span><span class="sxs-lookup"><span data-stu-id="8d928-109">A client calls **[IOSTX::SyncBeg](iostx-syncbeg.md)**, **[IOSTX::SyncEnd](iostx-syncend.md)**, **[IOSTX::SyncHdrBeg](iostx-synchdrbeg.md)**, and **[IOSTX::SyncHdrEnd](iostx-synchdrend.md)** in a sequence to synchronize Outlook 2013 or Outlook 2010 folders and items between a local store and a server.</span></span> <span data-ttu-id="8d928-110">Фактическая последовательность вызовов зависит от данных, которые необходимо реплицировать (например, иерархия папок Outlook 2013 или Outlook 2010, папки Outlook 2013 или Outlook 2010, элементы почты, элементы календаря и т. д.) и направление синхронизации (отправка из локального хранилища на сервер или загрузка с сервера в локальное хранилище).</span><span class="sxs-lookup"><span data-stu-id="8d928-110">The actual sequence of calls depends on the data that needs to be replicated (for example, a hierarchy of Outlook 2013 or Outlook 2010 folders, an Outlook 2013 or Outlook 2010 folder, mail items, calendar items, and so on) and the direction of synchronization (whether uploading from the local store to the server, or downloading from the server to the local store).</span></span> <span data-ttu-id="8d928-111">Типичная последовательность вызовов:</span><span class="sxs-lookup"><span data-stu-id="8d928-111">Here is a typical sequence of calls:</span></span> 
  
1. <span data-ttu-id="8d928-112">Клиент вызывает **иосткс:: синкбег** для начала репликации, указывая идентификатор состояния и указатель на адрес соответствующей структуры данных.</span><span class="sxs-lookup"><span data-stu-id="8d928-112">The client calls **IOSTX::SyncBeg** to begin replication, specifying a state identifier and a pointer to an address of a corresponding data structure.</span></span> 
    
2. <span data-ttu-id="8d928-113">Outlook 2013 или Outlook 2010 выделяет структуру данных и инициализирует структуру данных с необходимыми сведениями для клиента.</span><span class="sxs-lookup"><span data-stu-id="8d928-113">Outlook 2013 or Outlook 2010 allocates the data structure and initializes the data structure with the necessary information for the client.</span></span> 
    
3. <span data-ttu-id="8d928-114">Клиент выполняет репликацию, обновляя структуру данных для передачи в локальное хранилище и все необходимые сведения о репликации.</span><span class="sxs-lookup"><span data-stu-id="8d928-114">The client performs the replication, updating the data structure to convey to the local store any necessary information about the replication.</span></span>
    
4. <span data-ttu-id="8d928-115">После выполнения репликации клиент вызывает **[иосткс:: сетсинкресулт](iostx-setsyncresult.md)** и **Иосткс:: синценд** , чтобы уведомить локальное хранилище о завершении конкретной репликации.</span><span class="sxs-lookup"><span data-stu-id="8d928-115">After performing the replication, the client calls **[IOSTX::SetSyncResult](iostx-setsyncresult.md)** and **IOSTX::SyncEnd** to notify the local store of the completion of the specific replication.</span></span> 
    
> [!NOTE]
> <span data-ttu-id="8d928-116">Клиент всегда вызывает метод **иосткс:: синценд** , чтобы завершить репликацию, которая началась клиентом в определенном состоянии.</span><span class="sxs-lookup"><span data-stu-id="8d928-116">The client always calls **IOSTX::SyncEnd** to end a replication that the client has begun for a certain state.</span></span> <span data-ttu-id="8d928-117">В зависимости от общих данных, которые клиент должен синхронизировать, клиент может вызвать **иосткс:: синкбег** и **Иосткс:: синценд** несколько раз.</span><span class="sxs-lookup"><span data-stu-id="8d928-117">Depending on the overall data that the client needs to synchronize, the client may call the pair of calls **IOSTX::SyncBeg** and **IOSTX::SyncEnd** more than once.</span></span> 
  
## <a name="state-table"></a><span data-ttu-id="8d928-118">Таблица State</span><span class="sxs-lookup"><span data-stu-id="8d928-118">State Table</span></span>

> [!NOTE]
> <span data-ttu-id="8d928-119">В приведенной ниже таблице перечислены все допустимые состояния конечного автомата репликации, а также соответствующие идентификаторы состояний и структуры данных.</span><span class="sxs-lookup"><span data-stu-id="8d928-119">The following table lists all the valid states in the replication state machine, along with the corresponding state identifiers and data structures.</span></span> <span data-ttu-id="8d928-120">В столбце **реплицированные данные** термин "элементы" включает в себя почту, календарь, контакты, заметки, журнал и элементы задач.</span><span class="sxs-lookup"><span data-stu-id="8d928-120">In the **Data Replicated** column, the term "items" includes mail, calendar, contact, note, journal, and task items.</span></span> <span data-ttu-id="8d928-121">При репликации изменений из локального хранилища на сервер используйте идентификаторы состояний, указывающие "UPLOAD" и структуры данных с префиксом "UP" (например, **LR_SYNC_UPLOAD_HIERARCHY** и **[уфиер](uphier.md)** ).</span><span class="sxs-lookup"><span data-stu-id="8d928-121">When replicating changes from the local store to the server, use state identifiers specifying "UPLOAD" and data structures with the "UP" prefix (for example, **LR_SYNC_UPLOAD_HIERARCHY** and **[UPHIER](uphier.md)** ).</span></span> <span data-ttu-id="8d928-122">При репликации изменений с сервера в локальное хранилище используйте идентификаторы состояний, указывающие "DOWNLOAD" и структуры данных с префиксом "DN" (например, **LR_SYNC_DOWNLOAD_HIERARCHY** и **[днхиер](dnhier.md)** ).</span><span class="sxs-lookup"><span data-stu-id="8d928-122">When replicating changes from the server to the local store, use state identifiers specifying "DOWNLOAD" and data structures with the "DN" prefix (for example, **LR_SYNC_DOWNLOAD_HIERARCHY** and **[DNHIER](dnhier.md)** ).</span></span> 
  
|||||
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="8d928-123">**State**</span><span class="sxs-lookup"><span data-stu-id="8d928-123">**State**</span></span> <br/> |<span data-ttu-id="8d928-124">**Реплицированные данные**</span><span class="sxs-lookup"><span data-stu-id="8d928-124">**Data Replicated**</span></span> <br/> |<span data-ttu-id="8d928-125">**Идентификатор состояния**</span><span class="sxs-lookup"><span data-stu-id="8d928-125">**State Identifier**</span></span> <br/> |<span data-ttu-id="8d928-126">**Структура данных**</span><span class="sxs-lookup"><span data-stu-id="8d928-126">**Data Structure**</span></span> <br/> |
|[<span data-ttu-id="8d928-127">Состояние бездействия</span><span class="sxs-lookup"><span data-stu-id="8d928-127">Idle state</span></span>](idle-state.md) <br/> | <span data-ttu-id="8d928-128">*Нет*</span><span class="sxs-lookup"><span data-stu-id="8d928-128">*None*</span></span>  <br/> |<span data-ttu-id="8d928-129">**LR_SYNC_IDLE**</span><span class="sxs-lookup"><span data-stu-id="8d928-129">**LR_SYNC_IDLE**</span></span> <br/> | <span data-ttu-id="8d928-130">*Нет*</span><span class="sxs-lookup"><span data-stu-id="8d928-130">*None*</span></span>  <br/> |
|[<span data-ttu-id="8d928-131">Состояние синхронизации</span><span class="sxs-lookup"><span data-stu-id="8d928-131">Synchronize state</span></span>](synchronize-state.md) <br/> |<span data-ttu-id="8d928-132">Папки или элементы</span><span class="sxs-lookup"><span data-stu-id="8d928-132">Folders or items</span></span>  <br/> |<span data-ttu-id="8d928-133">**LR_SYNC**</span><span class="sxs-lookup"><span data-stu-id="8d928-133">**LR_SYNC**</span></span> <br/> |<span data-ttu-id="8d928-134">**[Синхр](sync.md)**</span><span class="sxs-lookup"><span data-stu-id="8d928-134">**[SYNC](sync.md)**</span></span> <br/> |
|[<span data-ttu-id="8d928-135">Состояние отправки иерархии</span><span class="sxs-lookup"><span data-stu-id="8d928-135">Upload hierarchy state</span></span>](upload-hierarchy-state.md) <br/> |<span data-ttu-id="8d928-136">Folders</span><span class="sxs-lookup"><span data-stu-id="8d928-136">Folders</span></span>  <br/> |<span data-ttu-id="8d928-137">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="8d928-137">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="8d928-138">**[UPHIER](uphier.md)**</span><span class="sxs-lookup"><span data-stu-id="8d928-138">**[UPHIER](uphier.md)**</span></span> <br/> |
|[<span data-ttu-id="8d928-139">Отправка состояния папки</span><span class="sxs-lookup"><span data-stu-id="8d928-139">Upload folder state</span></span>](upload-folder-state.md) <br/> |<span data-ttu-id="8d928-140">Folder</span><span class="sxs-lookup"><span data-stu-id="8d928-140">Folder</span></span>  <br/> |<span data-ttu-id="8d928-141">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="8d928-141">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="8d928-142">**[UPFLD](upfld.md)**</span><span class="sxs-lookup"><span data-stu-id="8d928-142">**[UPFLD](upfld.md)**</span></span> <br/> |
|[<span data-ttu-id="8d928-143">Состояние синхронизации контента</span><span class="sxs-lookup"><span data-stu-id="8d928-143">Synchronize contents state</span></span>](synchronize-contents-state.md) <br/> |<span data-ttu-id="8d928-144">Элементы</span><span class="sxs-lookup"><span data-stu-id="8d928-144">Items</span></span>  <br/> |<span data-ttu-id="8d928-145">**LR_SYNC_CONTENTS**</span><span class="sxs-lookup"><span data-stu-id="8d928-145">**LR_SYNC_CONTENTS**</span></span> <br/> |<span data-ttu-id="8d928-146">**[SYNCCONT](synccont.md)**</span><span class="sxs-lookup"><span data-stu-id="8d928-146">**[SYNCCONT](synccont.md)**</span></span> <br/> |
|[<span data-ttu-id="8d928-147">Состояние отправки таблицы</span><span class="sxs-lookup"><span data-stu-id="8d928-147">Upload table state</span></span>](upload-table-state.md) <br/> |<span data-ttu-id="8d928-148">Элементы</span><span class="sxs-lookup"><span data-stu-id="8d928-148">Items</span></span>  <br/> |<span data-ttu-id="8d928-149">**LR_SYNC_UPLOAD_TABLE**</span><span class="sxs-lookup"><span data-stu-id="8d928-149">**LR_SYNC_UPLOAD_TABLE**</span></span> <br/> |<span data-ttu-id="8d928-150">**[UPTBL](uptbl.md)**</span><span class="sxs-lookup"><span data-stu-id="8d928-150">**[UPTBL](uptbl.md)**</span></span> <br/> |
|[<span data-ttu-id="8d928-151">Состояние отправки сообщения</span><span class="sxs-lookup"><span data-stu-id="8d928-151">Upload message state</span></span>](upload-message-state.md) <br/> |<span data-ttu-id="8d928-152">Item</span><span class="sxs-lookup"><span data-stu-id="8d928-152">Item</span></span>  <br/> |<span data-ttu-id="8d928-153">**LR_SYNC_UPLOAD_MESSAGE**</span><span class="sxs-lookup"><span data-stu-id="8d928-153">**LR_SYNC_UPLOAD_MESSAGE**</span></span> <br/> |<span data-ttu-id="8d928-154">**[UPMSG](upmsg.md)**</span><span class="sxs-lookup"><span data-stu-id="8d928-154">**[UPMSG](upmsg.md)**</span></span> <br/> |
|[<span data-ttu-id="8d928-155">Состояние отправки состояния чтения</span><span class="sxs-lookup"><span data-stu-id="8d928-155">Upload read status state</span></span>](upload-read-status-state.md) <br/> |<span data-ttu-id="8d928-156">Элементы</span><span class="sxs-lookup"><span data-stu-id="8d928-156">Items</span></span>  <br/> |<span data-ttu-id="8d928-157">**LR_SYNC_UPLOAD_MESSAGE_READ**</span><span class="sxs-lookup"><span data-stu-id="8d928-157">**LR_SYNC_UPLOAD_MESSAGE_READ**</span></span> <br/> |<span data-ttu-id="8d928-158">**[UPREAD](upread.md)**</span><span class="sxs-lookup"><span data-stu-id="8d928-158">**[UPREAD](upread.md)**</span></span> <br/> |
|[<span data-ttu-id="8d928-159">Состояние отправки состояния удаления</span><span class="sxs-lookup"><span data-stu-id="8d928-159">Upload delete status state</span></span>](upload-delete-status-state.md) <br/> |<span data-ttu-id="8d928-160">Элементы</span><span class="sxs-lookup"><span data-stu-id="8d928-160">Items</span></span>  <br/> |<span data-ttu-id="8d928-161">**LR_SYNC_UPLOAD_MESSAGE_DEL**</span><span class="sxs-lookup"><span data-stu-id="8d928-161">**LR_SYNC_UPLOAD_MESSAGE_DEL**</span></span> <br/> |<span data-ttu-id="8d928-162">**[UPDEL](updel.md)**</span><span class="sxs-lookup"><span data-stu-id="8d928-162">**[UPDEL](updel.md)**</span></span> <br/> |
|[<span data-ttu-id="8d928-163">Состояние загрузки иерархии</span><span class="sxs-lookup"><span data-stu-id="8d928-163">Download hierarchy state</span></span>](download-hierarchy-state.md) <br/> |<span data-ttu-id="8d928-164">Folders</span><span class="sxs-lookup"><span data-stu-id="8d928-164">Folders</span></span>  <br/> |<span data-ttu-id="8d928-165">**LR_SYNC_DOWNLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="8d928-165">**LR_SYNC_DOWNLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="8d928-166">**[DNHIER](dnhier.md)**</span><span class="sxs-lookup"><span data-stu-id="8d928-166">**[DNHIER](dnhier.md)**</span></span> <br/> |
|[<span data-ttu-id="8d928-167">Состояние загрузки таблицы</span><span class="sxs-lookup"><span data-stu-id="8d928-167">Download table state</span></span>](download-table-state.md) <br/> |<span data-ttu-id="8d928-168">Элементы</span><span class="sxs-lookup"><span data-stu-id="8d928-168">Items</span></span>  <br/> |<span data-ttu-id="8d928-169">**LR_SYNC_DOWNLOAD_TABLE**</span><span class="sxs-lookup"><span data-stu-id="8d928-169">**LR_SYNC_DOWNLOAD_TABLE**</span></span> <br/> |<span data-ttu-id="8d928-170">**[DNTBL](dntbl.md)**</span><span class="sxs-lookup"><span data-stu-id="8d928-170">**[DNTBL](dntbl.md)**</span></span> <br/> |
|[<span data-ttu-id="8d928-171">Загрузка состояния заголовка сообщения</span><span class="sxs-lookup"><span data-stu-id="8d928-171">Download message header state</span></span>](download-message-header-state.md) <br/> |<span data-ttu-id="8d928-172">Заголовок сообщения</span><span class="sxs-lookup"><span data-stu-id="8d928-172">Message header</span></span>  <br/> |<span data-ttu-id="8d928-173">**LR_SYNC_DOWNLOAD_HEADER**</span><span class="sxs-lookup"><span data-stu-id="8d928-173">**LR_SYNC_DOWNLOAD_HEADER**</span></span> <br/> |<span data-ttu-id="8d928-174">**[HDRSYNC](hdrsync.md)**</span><span class="sxs-lookup"><span data-stu-id="8d928-174">**[HDRSYNC](hdrsync.md)**</span></span> <br/> |
   
## <a name="state-transition-diagram"></a><span data-ttu-id="8d928-175">Схема смены состояний</span><span class="sxs-lookup"><span data-stu-id="8d928-175">State Transition Diagram</span></span>

<span data-ttu-id="8d928-176">На следующей схеме показаны переходы состояний, происходящие при отправке или выполнении полной синхронизации (Загрузка, а затем отправка) папок или содержимого папок (элементы почты, календарей, контактов, заметок, задач и элементов журнала).</span><span class="sxs-lookup"><span data-stu-id="8d928-176">The following diagram shows the state transitions that occur when uploading or performing a full synchronization (downloading followed by uploading) of folders or contents of folders (mail, calendar, contact, note, task, or journal items).</span></span> 
  
<span data-ttu-id="8d928-177">@ @ @ @ @NEED, ЧТОБЫ ВСТАВИТЬ ИЛЛЮСТРАЦИЮ, КОТОРАЯ ОТСУТСТВУЕТ @@@@@@</span><span class="sxs-lookup"><span data-stu-id="8d928-177">@@@@@NEED TO INSERT ART HERE THAT IS MISSING@@@@@@</span></span>
  
## <a name="example-uploading-a-folder-hierarchy"></a><span data-ttu-id="8d928-178">Пример: отправка иерархии папок</span><span class="sxs-lookup"><span data-stu-id="8d928-178">Example: Uploading a Folder Hierarchy</span></span>

 <span data-ttu-id="8d928-179">При отправке иерархии папок выполняется следующая последовательность действий:</span><span class="sxs-lookup"><span data-stu-id="8d928-179">When uploading a hierarchy of folders, the following sequence of steps takes place:</span></span> 
  
|||||
|:-----|:-----|:-----|:-----|
|<span data-ttu-id="8d928-180">**Шаг**</span><span class="sxs-lookup"><span data-stu-id="8d928-180">**Step**</span></span> <br/> |<span data-ttu-id="8d928-181">**Действие**</span><span class="sxs-lookup"><span data-stu-id="8d928-181">**Action**</span></span> <br/> |<span data-ttu-id="8d928-182">**State**</span><span class="sxs-lookup"><span data-stu-id="8d928-182">**State**</span></span> <br/> |<span data-ttu-id="8d928-183">**Связанная структура данных**</span><span class="sxs-lookup"><span data-stu-id="8d928-183">**Related Data Structure**</span></span> <br/> |
|<span data-ttu-id="8d928-184">1.</span><span class="sxs-lookup"><span data-stu-id="8d928-184">1.</span></span>  <br/> |<span data-ttu-id="8d928-185">Клиент инициирует отправку иерархии с **иосткс:: синкбег**.</span><span class="sxs-lookup"><span data-stu-id="8d928-185">The client initiates the hierarchy upload with **IOSTX::SyncBeg**.</span></span>  <br/> |<span data-ttu-id="8d928-186">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="8d928-186">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="8d928-187">**UPHIER**</span><span class="sxs-lookup"><span data-stu-id="8d928-187">**UPHIER**</span></span> <br/> |
|<span data-ttu-id="8d928-188">2.</span><span class="sxs-lookup"><span data-stu-id="8d928-188">2.</span></span>  <br/> |<span data-ttu-id="8d928-189">Outlook 2013 или Outlook 2010 заполняет **уфиер** данными для клиента.</span><span class="sxs-lookup"><span data-stu-id="8d928-189">Outlook 2013 or Outlook 2010 populates **UPHIER** with information for the client.</span></span> <span data-ttu-id="8d928-190">Сюда входит Инициализация параметров [out]: *иент* имеет значение 0 *, а увеличение числа папок в иерархии* , требующих отправки.</span><span class="sxs-lookup"><span data-stu-id="8d928-190">This includes initializing the [out] parameters:  *iEnt*  is set to 0, and  *cEnt*  to the number of folders in the hierarchy that needs uploading.</span></span>  <br/> |<span data-ttu-id="8d928-191">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="8d928-191">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="8d928-192">**UPHIER**</span><span class="sxs-lookup"><span data-stu-id="8d928-192">**UPHIER**</span></span> <br/> |
|<span data-ttu-id="8d928-193">3.</span><span class="sxs-lookup"><span data-stu-id="8d928-193">3.</span></span>  <br/> |<span data-ttu-id="8d928-194">Клиент выполняет фактическую отправку иерархии.</span><span class="sxs-lookup"><span data-stu-id="8d928-194">The client does the actual hierarchy upload.</span></span> <span data-ttu-id="8d928-195">Например *, если увеличение* 10 для каждой из 10 папок, клиент вызывает **Иосткс:: синкбег**, указывая соответствующий идентификатор состояния и структуру данных для отправки папки.</span><span class="sxs-lookup"><span data-stu-id="8d928-195">As an example, if  *cEnt*  is 10, for each of the 10 folders, the client calls **IOSTX::SyncBeg**, specifying the appropriate state identifier and data structure for uploading a folder.</span></span>  <br/> |<span data-ttu-id="8d928-196">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="8d928-196">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="8d928-197">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="8d928-197">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="8d928-198">4.</span><span class="sxs-lookup"><span data-stu-id="8d928-198">4.</span></span>  <br/> |<span data-ttu-id="8d928-199">Outlook 2013 или Outlook 2010 заполняет **упфлд** , инициализируя параметры [out], включая причину отправки папки, указатель на объект Folder и идентификатор записи для папки.</span><span class="sxs-lookup"><span data-stu-id="8d928-199">Outlook 2013 or Outlook 2010 populates **UPFLD** by initializing its [out] parameters, including the reason for the folder upload, the pointer to the folder object, and the entry ID for the folder.</span></span>  <br/> |<span data-ttu-id="8d928-200">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="8d928-200">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="8d928-201">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="8d928-201">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="8d928-202">5.</span><span class="sxs-lookup"><span data-stu-id="8d928-202">5.</span></span>  <br/> |<span data-ttu-id="8d928-203">Клиент отправляет указанную папку.</span><span class="sxs-lookup"><span data-stu-id="8d928-203">The client uploads the specified folder.</span></span>  <br/> |<span data-ttu-id="8d928-204">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="8d928-204">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="8d928-205">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="8d928-205">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="8d928-206">6.</span><span class="sxs-lookup"><span data-stu-id="8d928-206">6.</span></span>  <br/> |<span data-ttu-id="8d928-207">Клиент уведомляет локальное хранилище о завершении загрузки папки: после успешного выполнения клиент задает параметр [in] *ulFlags* в **упфлд** с **UPF_OK**, а затем вызывает **иосткс:: сетсинкресулт (S_OK)** и **иосткс:: синценд**.</span><span class="sxs-lookup"><span data-stu-id="8d928-207">The client notifies the local store of the completion of the folder upload: Upon success, the client sets the [in] parameter  *ulFlags*  in **UPFLD** with **UPF_OK**, and then calls **IOSTX::SetSyncResult (S_OK)** and **IOSTX::SyncEnd**.</span></span> <span data-ttu-id="8d928-208">После сбоя клиент не настроил *ulFlags* с помощью флага **UPF_OK** .</span><span class="sxs-lookup"><span data-stu-id="8d928-208">Upon failure, the client would not set  *ulFlags*  with the **UPF_OK** flag.</span></span> <span data-ttu-id="8d928-209">Вызывает **иосткс:: сетсинкресулт**, передает значение **HRESULT** и **иосткс:: синценд**.</span><span class="sxs-lookup"><span data-stu-id="8d928-209">It calls **IOSTX::SetSyncResult**, passing in the **HRESULT** value, and **IOSTX::SyncEnd**.</span></span>  <br/> |<span data-ttu-id="8d928-210">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="8d928-210">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="8d928-211">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="8d928-211">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="8d928-212">7.</span><span class="sxs-lookup"><span data-stu-id="8d928-212">7.</span></span>  <br/> |<span data-ttu-id="8d928-213">Если задано значение **UPF_OK** , Outlook 2013 или Outlook 2010 будет очищать внутренний запрос на отправку папки.</span><span class="sxs-lookup"><span data-stu-id="8d928-213">If **UPF_OK** is set, Outlook 2013 or Outlook 2010 will clear the internal request for uploading the folder.</span></span> <span data-ttu-id="8d928-214">Затем, независимо от состояния *ulFlags* , он очистит все внутренние сведения о регистрации.</span><span class="sxs-lookup"><span data-stu-id="8d928-214">Then regardless of the state of  *ulFlags*  , it will clean up any internal bookkeeping information.</span></span> <span data-ttu-id="8d928-215">Несмотря на то, что в иерархии по-прежнему находятся папки для отправки (*иент* по-прежнему меньше, чем *цент*), клиент и outlook 2013 или Outlook 2010 повторите шаги 3 – 7.</span><span class="sxs-lookup"><span data-stu-id="8d928-215">While there are still folders in the hierarchy to upload (*iEnt*  is still less than  *cEnt*), the client and Outlook 2013 or Outlook 2010 repeat steps 3 through 7.</span></span>  <br/> |<span data-ttu-id="8d928-216">**LR_SYNC_UPLOAD_FOLDER**</span><span class="sxs-lookup"><span data-stu-id="8d928-216">**LR_SYNC_UPLOAD_FOLDER**</span></span> <br/> |<span data-ttu-id="8d928-217">**UPFLD**</span><span class="sxs-lookup"><span data-stu-id="8d928-217">**UPFLD**</span></span> <br/> |
|<span data-ttu-id="8d928-218">8.</span><span class="sxs-lookup"><span data-stu-id="8d928-218">8.</span></span>  <br/> |<span data-ttu-id="8d928-219">Клиент уведомляет локальное хранилище о завершении отправки иерархии: после успешного выполнения клиент устанавливает флаг [in] в **уфиер** с **UPH_OK**, а затем вызывает **иосткс:: Сетсинкресулт (S_OK)** и **иосткс:: синценд**.</span><span class="sxs-lookup"><span data-stu-id="8d928-219">The client notifies the local store of the completion of the hierarchy upload: Upon success, the client sets the [in] flag in **UPHIER** with **UPH_OK**, and then calls **IOSTX::SetSyncResult (S_OK)** and **IOSTX::SyncEnd**.</span></span> <span data-ttu-id="8d928-220">После сбоя клиент не установил флаг **UPH_OK** .</span><span class="sxs-lookup"><span data-stu-id="8d928-220">Upon failure, the client would not set the **UPH_OK** flag.</span></span> <span data-ttu-id="8d928-221">Вызывает **иосткс:: сетсинкресулт**, передает значение **HRESULT** и **иосткс:: синценд**.</span><span class="sxs-lookup"><span data-stu-id="8d928-221">It calls **IOSTX::SetSyncResult**, passing in the **HRESULT** value, and **IOSTX::SyncEnd**.</span></span>  <br/> |<span data-ttu-id="8d928-222">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="8d928-222">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="8d928-223">**UPHIER**</span><span class="sxs-lookup"><span data-stu-id="8d928-223">**UPHIER**</span></span> <br/> |
|<span data-ttu-id="8d928-224">9.</span><span class="sxs-lookup"><span data-stu-id="8d928-224">9.</span></span>  <br/> |<span data-ttu-id="8d928-225">Если задано значение **UPH_OK** , Outlook 2013 или Outlook 2010 будет очищать внутренний запрос на отправку иерархии.</span><span class="sxs-lookup"><span data-stu-id="8d928-225">If **UPH_OK** is set, Outlook 2013 or Outlook 2010 will clear the internal request for uploading the hierarchy.</span></span> <span data-ttu-id="8d928-226">Затем, независимо от состояния *ulFlags* , он очистит все внутренние сведения о регистрации.</span><span class="sxs-lookup"><span data-stu-id="8d928-226">Then regardless of the state of  *ulFlags*  , it will clean up any internal bookkeeping information.</span></span>  <br/> |<span data-ttu-id="8d928-227">**LR_SYNC_UPLOAD_HIERARCHY**</span><span class="sxs-lookup"><span data-stu-id="8d928-227">**LR_SYNC_UPLOAD_HIERARCHY**</span></span> <br/> |<span data-ttu-id="8d928-228">**UPHIER**</span><span class="sxs-lookup"><span data-stu-id="8d928-228">**UPHIER**</span></span> <br/> |
   
## <a name="see-also"></a><span data-ttu-id="8d928-229">См. также</span><span class="sxs-lookup"><span data-stu-id="8d928-229">See also</span></span>



[<span data-ttu-id="8d928-230">Сведения об API репликации</span><span class="sxs-lookup"><span data-stu-id="8d928-230">About the Replication API</span></span>](about-the-replication-api.md)
  
[<span data-ttu-id="8d928-231">��������� MAPI</span><span class="sxs-lookup"><span data-stu-id="8d928-231">MAPI Constants</span></span>](mapi-constants.md)
  
[<span data-ttu-id="8d928-232">SYNCSTATE</span><span class="sxs-lookup"><span data-stu-id="8d928-232">SYNCSTATE</span></span>](syncstate.md)

