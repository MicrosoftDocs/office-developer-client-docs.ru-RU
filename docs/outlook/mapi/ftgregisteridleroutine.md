---
title: FtgRegisterIdleRoutine
manager: soliver
ms.date: 03/09/2015
ms.audience: Developer
ms.topic: reference
ms.prod: office-online-server
localization_priority: Normal
api_name:
- MAPI.FtgRegisterIdleRoutine
api_type:
- COM
ms.assetid: 8d9557ba-7919-42c6-9e2f-f10214437d53
description: 'Дата последнего изменения: 9 марта 2015 г.'
ms.openlocfilehash: b45b80f09efbd4f05aabc2c868d5bd8eb5fa4cce
ms.sourcegitcommit: 8657170d071f9bcf680aba50b9c07f2a4fb82283
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "33418523"
---
# <a name="ftgregisteridleroutine"></a>FtgRegisterIdleRoutine

**Область применения**: Outlook 2013 | Outlook 2016 
  
Добавляет режим простоя на основе функций [FNIDLE](fnidle.md) в систему MAPI. 
  
|||
|:-----|:-----|
|Файл заголовка:  <br/> |Mapiutil.h  <br/> |
|Реализовано в:  <br/> |MAPI  <br/> |
|Вызывающая сторона:  <br/> |Клиентские приложения и поставщики услуг  <br/> |
   
```cpp
FTG FtgRegisterIdleRoutine(
  PFNIDLE pfnIdle,
  LPVOID pvIdleParam,
  short priIdle,
  ULONG csecIdle,
  USHORT iroIdle
);
```

## <a name="parameters"></a>Parameters

_pfnIdle_
  
> [in] Указатель на режим простоя. 
    
_pvIdleParam_
  
> [in] Указатель на блок памяти, который праздный двигатель должен передавать в качестве параметра режиму простоя при вызове. 
    
_priIdle_
  
> [in] Начальный приоритет для обычного простоя. Возможные приоритеты для процедур, определенных реализацией, больше или меньше нуля, но не ноль. Нулевой приоритет зарезервирован для события пользователя, например щелчка мыши или WM_PAINT сообщения. Приоритеты, более нулевые, представляют фоновые задачи, которые имеют более высокий приоритет, чем события пользователя, и отправляются в рамках стандартной Windows помпы сообщений. Приоритеты менее нуля представляют задачи, которые работают только во время простоя насоса сообщений. Примеры приоритетов: 1 для представления переднего плана, 2 для вставки символов с изменением питания и 3 для скачивания новых сообщений.
    
_csecIdle_
  
> [in] Начальное значение времени, в сотые секунды, для использования при указании параметров простоя. Значение начального значения времени варьируется в зависимости от того, что передается в _параметре iroIdle._ Значение может быть одним из следующих: 
    
  - Минимальный период бездействия пользователей, который должен пройти до того, как простой двигатель MAPI впервые вызывает режим простоя, если флаг FIROWAIT установлен в _iroIdle._ После этого времени, простаивающим двигателем можно вызвать праздный режим так часто, как это необходимо. 
    
  - Минимальный интервал между вызовами в режим простоя, если флаг FIROINTERVAL задан в _iroIdle._ 
    
_iroIdle_
  
> [in] Битмаска флагов, используемая для настройки начальных параметров обычного простоя. Можно установить следующие флаги:
    
  FIRONOADJUSTMENT
    
  > Используйте этот флаг, чтобы указать, что простой обычный отметок времени не следует настраивать для сна или возобновления. Поведение по умолчанию без этого флага в том, что время сна исключается при расчете просчитаного времени. Если FIRONOADJUSTMENT передается, то при расчете пройденного времени включается время сна.
      
  FIRODISABLED
    
  > Режим простоя должен быть отключен при регистрации. По умолчанию необходимо включить режим простоя при регистрации **ftgRegisterIdleRoutine.** 
      
  FIROINTERVAL 
    
  > Время, указанное параметром  _csecIdle,_ — это минимальный интервал между последовательными вызовами в режим простоя. 
      
  FIROONCEONLY 
    
  > Устаревший. Не используйте.  
      
  FIROPERBLOCK 
    
  > Устаревший. Не используйте.  
      
  FIROWAIT 
    
  > Время, указанное параметром  _csecIdle,_ — это минимальный период бездействия пользователя, который должен пройти до первого вызова простаивающим двигателем MAPI. После этого времени, простаивающим двигателем можно вызвать праздный режим так часто, как это необходимо. 
    
## <a name="return-value"></a>Возвращаемое значение

Функция **FtgRegisterIdleRoutine** возвращает тег функции, определяющий режим простоя, добавленный в систему MAPI. Если **FtgRegisterIdleRoutine** не может зарегистрировать режим простоя для клиентского приложения или поставщика услуг, например из-за проблем с памятью, он возвращает NULL. 
  
## <a name="remarks"></a>Примечания

Следующие функции выполняются с простаивающим двигателем MAPI и простаивающим режимом на основе прототипа функции [FNIDLE.](fnidle.md) 
  
|**Простаиваемая рутинная функция**|**Использование**|
|:-----|:-----|
|[ChangeIdleRoutine](changeidleroutine.md) <br/> |Изменяет характеристики зарегистрированного режима простоя.  <br/> |
|[DeregisterIdleRoutine](deregisteridleroutine.md) <br/> |Удаляет зарегистрированную процедуру простоя из системы MAPI.  <br/> |
|[EnableIdleRoutine](enableidleroutine.md) <br/> |Отключает или повторно включает зарегистрированный режим простоя без удаления его из системы MAPI.  <br/> |
|**FtgRegisterIdleRoutine** <br/> |Добавляет праздную рутину в систему MAPI с ее включением или без нее.  <br/> |
|[MAPIDeInitIdle](mapideinitidle.md) <br/> |Отключит простой движок MAPI для вызываемой программы.  <br/> |
|[MAPIInitIdle](mapiinitidle.md) <br/> |Инициализирует простой двигатель MAPI для вызываемой заявки.  <br/> |
   
**ChangeIdleRoutine,** **DeregisterIdleRoutine** и **EnableIdleRoutine** принимают в качестве параметра ввода тег функции, возвращенный **FtgRegisterIdleRoutine**. 
  
Когда все задачи переднего плана для платформы простаивают, простаивающим двигателем MAPI называются самые приоритетные режимы простоя, готовые к выполнению. Не гарантируется порядок вызова среди праздных режимов одного и того же приоритета. 
  
Ниже приводится пример использования флага FIRONOADJUSTMENT в _параметре iroIdle._ 
  
1. Регистрация простоя с 5-минутной задержкой.
    
2. Hibernate/Sleep на компьютере через 1 минуту (4 минуты, оставленные на оттайке).
    
3. Возобновим работу компьютера через 10 минут.
    
Поведение по умолчанию, без FIRONOADJUSTMENT, является то, что вам по-прежнему придется ждать еще 4 минуты для выполнения рутины. То есть, ваш timer был скорректирован, чтобы разрешить, как долго компьютер спал. Однако, если вы передаете FIRONOADJUSTMENT, процедура простоя будет работать немедленно, так как прошло более 5 минут реального времени.
  

