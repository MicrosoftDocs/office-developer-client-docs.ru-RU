---
title: Создание рабочего процесса Project Server для управления запросами
manager: soliver
ms.date: 08/10/2016
ms.audience: Developer
localization_priority: Normal
ms.assetid: b0e4a3b3-d1df-454d-b74c-b980b0b456f6
description: В этой статье описывается, как создать простой рабочий процесс с помощью SharePoint Designer 2013.
ms.openlocfilehash: bbefc5d30ccb508a24c32fe41e733e6e8187ecd9
ms.sourcegitcommit: ef717c65d8dd41ababffb01eafc443c79950aed4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/04/2018
ms.locfileid: "25388303"
---
# <a name="create-a-project-server-workflow-for-demand-management"></a>Создание рабочего процесса Project Server для управления запросами

В этой статье описывается, как создать простой рабочий процесс с помощью SharePoint Designer 2013. Можно Экспорт рабочего процесса в Visio 2013 визуализации и изменения, или использовать Visio 2013 рабочие процессы проекта Project Server 2013 и импорт разработки в SharePoint Designer 2013 для публикации в Project Web App. Дополнительные сведения о платформе рабочего процесса SharePoint и создание рабочих процессов с помощью SharePoint Designer 2013 и Visio 2013 можно статьи [рабочих процессов в SharePoint 2013](https://msdn.microsoft.com/library/jj163986%28office.15%29.aspx) в документации разработчика SharePoint 2013. 
  
Сведения о подготовке Project Server для рабочих процессов можно [Запуск: Установка и настройке диспетчера рабочих процессов SharePoint 2013](https://msdn.microsoft.com/library/jj163276%28office.15%29.aspx).

<a name="pj15_CreateWorkflowSPD_General"> </a>

## <a name="creating-a-general-workflow"></a>Создание общего рабочего процесса

Используйте следующие шаги для создания рабочего процесса Project Server 2013 с помощью SharePoint Designer 2013. Рабочий процесс предназначен для управления запросами предложений по проекту.
  
Подробное описание шагов в разделе [Создание ветвления рабочего процесса](#pj15_CreateWorkflowSPD_Detailed) . 
  
### <a name="to-create-a-project-server-workflow-general-procedure"></a>Создание рабочего процесса Project Server (общая процедура)

1. Определите требования, а затем разработайте рабочий процесс. Организуйте его этапы и стадии, а также определите настраиваемые поля, которые будет использовать этот рабочий процесс.
    
2. Создайте сущности, требующихся в рабочем процессе в Project Web App.
    
    1. Просмотрите существующие этапы рабочего процесса; создайте этапы по мере необходимости.
        
    2. Создайте корпоративные настраиваемые поля, которые будет использовать рабочий процесс. Чтобы настраиваемое поле было доступно в стадии рабочего процесса, оно должно управляться рабочим процессом.
        
    3. Отредактируйте или создайте страницы сведений о проекте (PDP), которые будут использоваться стадиями рабочего процесса для сбора сведений для проекта. В данном примере стадии используют страницы сведений о проекте по умолчанию, которые редактируются, чтобы включить в них новое настраиваемое поле.
        
    4. Создайте необходимые стадии рабочего процесса, а затем сопоставьте каждую стадию рабочего процесса с правильным этапом.
    
3. В SharePoint Designer 2013 создайте рабочий процесс, используя декларативные инструкции в **текстовый конструктор**:
    
    > [!NOTE]
    > Можно также **Visual Designer** в SharePoint Designer 2013 или импорта существующих рабочих процессов из Visio 2013. Выполните следующие действия, чтобы использовать **текстовый конструктор**. 
    > 
    > 1. Откройте сайт Project Web App, а затем создайте рабочий процесс сайта, использующего платформу рабочих процессов **Рабочего процесса SharePoint 2013 — Project Server** . 
    > 2. Добавьте стадии, которые будет использовать рабочий процесс.
    > 3. Вставьте шаги, условия, действия и циклы рабочего процесса, которые требуются в каждой стадии.
    > 4. Проверьте наличие каких-либо ошибок рабочего процесса и исправьте все найденные ошибки.
    > 5. (Необязательно) Переключитесь в представление **Конструктора Visual**или Экспорт рабочего процесса в файл Visio 2013. Можно изменить представление Visio и сохранить изменения в текущем рабочий процесс. Можно изменить файл Visio и импортировать его в SharePoint 2013 Designer для создания других рабочих процессов.
    > 6. Публикация рабочего процесса. После публикации, рабочий процесс показывает список рабочих процессов для сайта Project Web App.
    
4. В Project Web App используйте рабочий процесс для управления запросами предложений по проекту.
    
    1. Создайте шаблон корпоративного проекта (EPT), использующий рабочий процесс.
        
    2. На странице центра проектов создайте проект, который использует шаблон EPT для рабочего процесса, а затем пройдите по стадиям рабочего процесса.
        
    3. Тщательно протестируйте рабочий процесс.
        
    4. Разверните рабочий процесс на рабочем сервере.

<a name="pj15_CreateWorkflowSPD_Detailed"> </a>

## <a name="creating-a-branching-workflow"></a>Создание ветвящегося рабочего процесса

Прежде чем использовать SharePoint Designer 2013 для создания рабочего процесса Project Server, служба 1.0 клиент диспетчера рабочих процессов должна быть настроена для использования действия рабочего процесса Project Server 2013. Сведения о том, как настроить 1.0 клиент диспетчера рабочих процессов, содержатся в статьях [рабочих процессов в SharePoint 2013](https://msdn.microsoft.com/library/jj163986%28office.15%29.aspx) в документации разработчика SharePoint Server 2013. 
  
Следующая процедура подробные включает в себя те же действия, как показано в разделе [Создание общего рабочего процесса](#pj15_CreateWorkflowSPD_General) . 
  
### <a name="to-create-a-project-server-branching-workflow-detailed-procedure"></a>Создание ветвящегося рабочего процесса Project Server (подробная процедура)

#### <a name="1-plan-and-design-the-workflow"></a>1. Планирование и проектирование рабочего процесса.

Рабочий процесс Project Server можно интегрировать с несколькими стадии и этапы процесса управления запросами. Так как рабочие процессы могут быть сложными, необходимо ознакомиться с требованиями бизнеса и тщательное планирование рабочего процесса. Простой пример разработки ветвления рабочего процесса, который используется оценочная стоимость предложения по проекту, чтобы определить принятия предложения. Если оценочная стоимость больше, чем 25 000 Долларов США, отклоните предложение; в противном случае принятия предложения и создать проект.
    
Так как Visio 2013 и SharePoint Designer 2013 можно использовать для разработки и создания рабочих процессов для Project Server 2013, можно проще экспериментировать с рабочими процессами сравнению с Project Server 2010. Пример проекта рабочего процесса в этой статье совпадает со значением статьи [Создание ветвления рабочего процесса](https://msdn.microsoft.com/library/a02cafdc-d881-4271-b446-d8b2cd456a52%28Office.15%29.aspx) в пакет SDK для Project 2010. При проектировании и создать рабочий процесс тестирования на удаленном компьютере с помощью тестового экземпляр Project Web App, нет необходимости создавать рабочие процессы непосредственно на компьютере Project Server 2013. 
    
#### <a name="2-create-the-entities-that-your-workflow-requires"></a>2. Создание сущностей, которые требуется рабочего процесса.

В Project Web App просмотрите этапы доступные рабочего процесса и этапов и корпоративные настраиваемые поля, которые доступны. При необходимости создайте объекты, которые требуется рабочего процесса, как показано ниже:
    
1. **Этапы рабочего процесса** По умолчанию при установке Project Web App включает в себя создание, выбор, планирование, управление и по завершении этапа. Для ветвления пример рабочего процесса нет необходимости создавать другие этапы. 
        
2. **Корпоративные настраиваемые поля** Ветвление рабочего процесса требуется project стоимость настраиваемого поля, управляемые рабочими. Настраиваемые поля, управляемые рабочими значение странице сведений о проекте, использующего рабочего процесса. Например выберите значок **Параметры** в верхней правой части страницы Project Web App, выберите **Параметры веб-клиента Project**и нажмите кнопку **Корпоративные настраиваемые поля и таблицы подстановки**.
        
   Создание настраиваемого поля с именем стоимость предложения для сущности **проекта** и выберите тип **затрат**. В поле Описание введите оценка стоимости предложения проекта. В разделе **поведение** выберите **поведение управляется рабочим процессом**.
        
3. **Страницы сведений о проекте** Изменение или создание PDP, которые будут использовать стадии рабочего процесса. Например выполните следующие действия: 
        
    1. На странице параметров сервера выберите **Страницы сведений о проекте**, а затем выберите PDP **ProjectInformation**. 
            
    2. На вкладке **СТРАНИЦА** ленты в группе **Правка** выберите команду **Изменить страницу**.
            
    3. Нажмите стрелку вниз в верхней правой части **Основные сведения о** веб-части и выберите команду **Изменить веб-части**. Или на вкладке **Веб-ЧАСТИ** на ленте в группе **Свойства** выберите **Свойства веб-части** для отображения "редактор". 
            
    4. В разделе **Отображаемые поля проекта** веб-части "Редактор" (см. рисунок 1) выберите **Изменить**.
            
    5. Добавить настраиваемое поле **Стоимости предложения** перемещение над полем **владельца** в список **Выбранные поля проекта** затем нажмите **кнопку ОК** (см).
      
    6. В веб-части "Редактор" нажмите кнопку **ОК**, а затем на вкладке **СТРАНИЦА** ленты в группе **Правка** нажмите **Stop Editing** (Завершить редактирование). На рисунке 2 показано настраиваемое поле **Proposal Cost**, добавленное на страницу сведений о проекте информации по проекту. 

    **На рисунке 1. Редактирование веб-части поля проекта странице сведений о проекте**

    ![Изменение поля проекта веб-части странице сведений о проекте] (media/pj15_CreateWorkflowSPD_EditPDP.gif "Изменение поля проекта веб-части странице сведений о проекте")

    **Рис. 2. Измененная страница сведений о проекте с настраиваемым полем "Стоимость инициативы"**

    ![Измененная страница сведений о Проекте содержит поле стоимости предложения] (media/pj15_CreateWorkflowSPD_EditedPDP.gif "Измененная страница сведений о Проекте содержит поле стоимости предложения")
  
4. **Этапы рабочего процесса** Создание этапов, которые необходимы для каждого этапа рабочего процесса. На странице "Параметры сервера" выберите **Стадии рабочего процесса**и нажмите кнопку **Создать СТАДИЮ рабочего ПРОЦЕССА**. На рисунке 3 показана часть на странице Добавление этапа рабочего процесса.
    
    **Рис. 3. Добавление стадии рабочего процесса в Project Web App**

    ![Добавление стадии рабочего процесса в Project Web App] (media/pj15_CreateWorkflowSPD_AddWorkflowStage.gif "Добавление стадии рабочего процесса в Project Web App")
  
    Ветвления примере рабочего процесса с помощью четырех этапов, указанных в таблице 1. В разделе **Дополнительных параметров для отображаемой страницы сведений о проекте** на странице Добавление этапа рабочего процесса (не показано на рисунке 3) значения являются необязательными. они предоставляют дополнительную информацию на странице состояния рабочего процесса. К примеру так как для начального предложения сведения о странице сведений о Проекте требуется пользователям вводить данные, можно установите флажок **Страница сведений о проекте требуют внимания** и добавьте описание, таких как задать имя проекта и затраты на этой странице сведений о Проекте.
    
    На рисунке 4 показаны четыре стадии, завершенные на странице стадий рабочего процесса.
    
    **Таблица 1. Стадии для ветвящегося рабочего процесса**

    |Имя|Описание|Описание для отправки|Этап|Отображаемые PDP|Настраиваемые поля|
    |:-----|:-----|:-----|:-----|:-----|:-----|
    |Начальные сведения об инициативе  <br/> |Установите имя проекта и стоимость.  <br/> |Отправьте проект как инициативу.  <br/> |Создание  <br/> |Информация по проекту  <br/> Сведения о проекте  <br/> |Стоимость инициативы (обязательно)  <br/> |
    |Сведения о проекте  <br/> |Предоставьте сведения о предложенном проекте.  <br/> |Отправьте сведения, чтобы продолжить работу с проектом.  <br/> |Создание  <br/> |Информация по проекту  <br/> Сведения о проекте  <br/> |Стоимость инициативы (только для чтения)  <br/> |
    |Автоматическое отклонение  <br/> |Проект отклоняется на основе предоставленной информации.  <br/> | <br/> |Создание  <br/> |Информация по проекту  <br/> |Стоимость инициативы (только для чтения)  <br/> |
    |Выполнение  <br/> |Инициатива принимается и готова для управления проектами.  <br/> | <br/> |Управление  <br/> |Информация по проекту  <br/> Сведения о проекте  <br/> |Стоимость инициативы (только для чтения)  <br/> |
   
    **Рис. 4. Список стадий рабочего процесса в Project Web App**

    ![Список этапов рабочего процесса в Project Web App] (media/pj15_CreateWorkflowSPD_WorkflowStages.gif "Список этапов рабочего процесса в Project Web App")
  
#### <a name="3-construct-the-workflow-in-the-text-based-designer"></a>3. Создайте рабочий процесс в конструкторе на основе текста.

В SharePoint Designer 2013 создания рабочего процесса с помощью декларативных операторов в конструкторе на основе текста. Началом ввода текста в строке оранжевый вставки получение контекстной автозавершение операторов для логики рабочего процесса и действия, или можно вставить логику и действия с помощью элементов управления в группе **Вставка** на вкладке **рабочего ПРОЦЕССА** на ленте. 
    
1. Выберите **Открыть узел**в представлении Backstage SharePoint Designer 2013. Например, откройте `https://ServerName/pwa`. На левой панели **навигации** выберите **рабочие процессы**. На вкладке **рабочие ПРОЦЕССЫ** на ленте в группе **Создать** выберите **Рабочий процесс сайта**. В данном примере имя рабочему процессу ветвление рабочего процесса. Убедитесь, что **Рабочий процесс SharePoint 2013 — Project Server** в раскрывающемся списке **Тип платформы** (см). 
    
    **Рис. 5. Создание рабочего процесса сайта Project Server**

    ![Создание рабочего процесса сайта Project Server] (media/pj15_CreateWorkflowSPD_CreateSiteWorkflow.gif "Создание рабочего процесса сайта Project Server")
  
2. Перейдите на вкладку **Ветвящийся рабочий процесс**. Затем на вкладке **РАБОЧИЙ ПРОЦЕСС** ленты в группе **Manage** (Управление) в раскрывающемся списке **Представления** выберите **Текстовый конструктор**. Чтобы отобразить представление с мигающей оранжевой строкой вставки (см. рисунок 6), щелкните мышью где-нибудь внутри представления.
    
    **Рис. 6. Использование представления текстового конструктора для рабочего процесса**

    ![Использование представления текстового конструктора] (media/pj15_CreateWorkflowSPD_TextBasedDesigner.gif "Использование представления текстового конструктора")
  
3. В представлении **Текстовый конструктор** добавьте стадии, используемые рабочим процессом. На вкладке **РАБОЧИЙ ПРОЦЕСС** ленты в группе **Вставка** в раскрывающемся списке **Стадия** в разделе **Create** (Создание) выберите **Начальные сведения об инициативе**.
    
    Аналогично, поместите оранжевую строку вставки под полем **Stage: Initial Proposal Details** (Стадия: начальные сведения об инициативе) и добавьте другие стадии, используемые рабочим процессом: **Сведения о проекте**, **Автоматическое отклонение** и **Выполнение** (см. рисунок 7). 
    
    **Рис. 7. Добавление стадии в рабочий процесс в SharePoint Designer**

    ![Добавление стадии рабочего процесса в SPD] (media/pj15_CreateWorkflowSPD_AddStageInSPD.gif "Добавление стадии рабочего процесса в SPD")
  
4. В каждой стадии добавьте шаги и логику рабочего процесса. 
    
    1. В стадии **Начальные сведения об инициативе** поместите оранжевую строку вставки вверху области стадии. В группе **Вставка** нажмите **Действие**, прокрутите вниз до раздела **Действия Project Web App** и выберите **Дождаться события проекта**. Нажмите **это событие проекта**, а затем выберите в раскрывающемся списке пункт **Событие: при отправке проекта**. 
    
    2. В разделе **Переход к стадии** для стадии **Начальные сведения об инициативе** вставьте **Если любое значение равно указанному значению**. Можно начать вводить эту инструкцию или воспользоваться элементом управления **Условие** в группе **Вставка** на ленте. 
    
    3. Выберите первый элемент управления **value**, а затем выберите **fx**, чтобы отобразить диалоговое окно **Определение подстановки в рабочем процессе** (см. рисунок 8). В раскрывающемся списке **Источник данных** выберите **Данные проекта**. В раскрывающемся списке **Поле из источника** выберите **Стоимость инициативы**.
    
       **Рис. 8. Определение значения подстановки в рабочем процессе**

       ![Определение значения подстановки в рабочем процессе] (media/pj15_CreateWorkflowSPD_DefineWorkflowLookup.gif "Определение значения подстановки в рабочем процессе")
  
    4. Завершить `If` инструкции, чтобы она отображает следующие сведения: **Если стоимость данных: предложения проекта больше, чем 25000**
    
       > [!NOTE]
       > Вместо этого можно было бы создать переменную рабочего процесса, установить для этой переменной значение настраиваемого поля, а затем сравнивать переменную со значением. Например, в раскрывающемся списке **Локальные переменные** на ленте создайте переменную с именем **TotalCost** (без пробелов) и типом **Number**. В диалоговом окне **Определение подстановки в рабочем процессе** выберите **Переменные и параметры рабочего процесса** для источника данных, а затем выберите **Переменная: TotalCost** в качестве поля. Инструкция **Если** может быть такой: **Если Переменная: TotalCost больше 25000**
  
    5. Поместите в строке оранжевый вставки в пределах `If` ветвь, а затем **перейдите на стадии** с помощью элемента управления **Действие** , в группе **Вставка** на ленте. Выберите раскрывающийся элемент управления **стадии** и стадию **Автоматического отклонения** . 
    
       Аналогично, в `Else` ветвление, вставьте оператор **перейдите к сведений о проекте** . На рисунке 9 показан завершенный стадии **Начальных сведений о предложении** . 
    
       **Рис. 9. Заполненная логика для стадии "Начальные сведения об инициативе"**

       ![Логика завершено для начальных сведений о предложении] (media/pj15_CreateWorkflowSPD_InitialStageLogic.gif "Логика завершено для начальных сведений о предложении")
  
    6. Если вы не хотите приостановить рабочий процесс и отобразить некоторые данные на странице сведений о проекте, оставьте первый раздел на стадии **Автоматическое отклонение** пустым. Раздел **Переход к стадии** должен содержать переход; поскольку нет других стадий после отклонения, введите для инструкции Перейти к завершению рабочего процесса. 
    
    7. На стадии **Сведения о проекте** в разделе **Переход к стадии** введите Перейти к выполнению. Если не требуется добавить дополнительные данные, и вы не хотите приостановить рабочий процесс, то не нужно дожидаться отправленного события. 
    
    8. Если вы не хотите приостановить рабочий процесс, на стадии **Выполнение** оставьте раздел действия стадии пустым. В разделе **Переход к стадии** добавьте **Перейти к завершению рабочего процесса**.
    
5. В группе **Сохранить** на ленте нажмите **Check for Errors** (Проверка), чтобы выполнить проверку на наличие ошибок рабочего процесса (см. рисунок 10). Исправьте все ошибки и нажмите **Сохранить**.
    
    **Рис. 10. Проверка на наличие ошибок рабочего процесса в SharePoint Designer**

    ![Проверка ошибок в рабочем процессе] (media/pj15_CreateWorkflowSPD_SPDCheckForErrors.gif "Проверка ошибок в рабочем процессе")
  
6. (Дополнительно.) В группе **Управление** на ленте в раскрывающемся списке **Представления** выберите **Визуальный конструктор**. На рисунке 11 это представление показано в масштабе 50 %.
    
    Элементы в рабочем процессе можно изменять с помощью визуального конструктора. Например, выберите условие **Если любое значение равно указанному значению**, нажмите значок инструмента в нижнем левом углу условия, а затем выберите **Значение**, чтобы отобразить условия сравнения в диалоговом окне **Свойства**. 
    
    **Рис. 11. Использование визуального конструктора для рабочего процесса**

    ![Использование конструктора Visio рабочего процесса] (media/pj15_CreateWorkflowSPD_SwitchView.gif "Использование конструктора Visio рабочего процесса")
  
    При рабочего процесса в режиме конструктора Visual для сохранения рабочего процесса в Visio 2013 (vsdx (en)-файле для резервного копирования или для более поздней версии использовать, можно **экспортировать в Visio**.
    
7. Публикация рабочего процесса. При публикации рабочего процесса в активной сайта Project Web App с помощью SharePoint Designer 2013 рабочего процесса зарегистрирован на сайт SharePoint или в Azure и становится доступной в Project Web App для нового EPTs.

#### <a name="4-create-an-ept-for-the-workflow-and-then-test-the-workflow"></a>4. Создание типа корпоративного проекта для рабочего процесса и затем протестировать рабочий процесс.

В Project Web App создайте типа корпоративного проекта для рабочего процесса и затем протестировать рабочий процесс, создав предложение проекта:
    
1. На странице "Параметры веб-клиента Project" выберите **Типы корпоративных проектов**и создайте с именем рабочего процесса ветвление тестового типа корпоративного проекта. Снимите флажок **создавать новые проекты как проектов списка задач SharePoint** , чтобы Project Server будет поддерживать полный доступ проекты, созданные с типом корпоративного проекта. Выберите **Ветвление рабочего процесса** в раскрывающемся списке **Сопоставление рабочего процесса сайта** и выберите в раскрывающемся списке **Страница нового проекта** в качестве первой страницы, которая показывает рабочий процесс **Сведений о проекте** страница сведений о Проекте. 
    
    **Рис. 12. Добавление EPT для рабочего процесса**

    ![Добавление типа корпоративного проекта для рабочего процесса] (media/pj15_CreateWorkflowSPD_EPTs.gif "Добавление типа корпоративного проекта для рабочего процесса")
  
    > [!NOTE]
    > Значение **Да** в столбце **Проект списка задач SharePoint** таблицы типов корпоративных проектов относится к EPT, который создает список задач SharePoint, причем этот список задач отображается в Project Web App, но SharePoint поддерживает управление этим проектом. Дополнительные сведения об управлении проектами как списками задач SharePoint см. в статье [Project Server 2013 architecture](project-server-2013-architecture.md). 
  
2. Откройте страницу проектов в Project Web App и затем создайте проект с помощью нового типа корпоративного проекта (см). Так как **Рабочий процесс ветвление тестирования** связан с **Ветвление рабочего процесса**, Создание проекта запускается в области Управление рабочего процесса.
    
    **Рис. 13. Создание проекта с помощью EPT "Тестовый ветвящийся рабочий процесс"**

    ![Создание проекта с типом корпоративного проекта] (media/pj15_CreateWorkflowSPD_NewProject.gif "Создание проекта с типом корпоративного проекта")
  
3. При отображении **Сведений о проекте** страница сведений о Проекте рабочего процесса добавьте данные в поля проекта. Например введите значение **Стоимости предложения** 30000. Английской версии Project Server, изменяет поля для отображения 30 000 долларов (см).
    
    **Рис. 14. Использование измененной PDP "Информация по проекту"**

    ![Использование измененного сведения о Проекте] (media/pj15_CreateWorkflowSPD_NewProjectStage1.gif "Использование измененного сведения о Проекте")
  
4. На вкладке **ПРОЕКТ** ленты в группе **Проект** нажмите **Сохранить**. Project Server добавляет данные со страницы PDP в проект, а затем отображает страницу состояния рабочего процесса (см. рисунок 15). Чтобы увидеть полное описание стадии "Начальные сведения об инициативе" в схеме состояния рабочего процесса, наведите указатель на стадию в схеме визуализации рабочего процесса.
    
    Таблица **Все стадии рабочего процесса** с помощью зеленой стрелки показывает, что стадия начальных сведений об инициативе ожидает ввод. Это объясняется тем, что рабочий процесс ожидает отправку события на стадии начальных сведений об инициативе. Если бы рабочий процесс не ожидал отправку события, можно было бы нажать **Далее** в группе **Страница**, чтобы перейти к следующей PDP. 
    
    **Рис. 15. использование страницы состояния рабочего процесса на стадии начальных сведений об инициативе**

    ![Страница состояния рабочего процесса после первой стадии] (media/pj15_CreateWorkflowSPD_NewProjectStage1Status.gif "Страница состояния рабочего процесса после первой стадии")
  
    Схема визуализации рабочего процесса показывает актуальную стадию зеленым цветом. На этапе **создания** актуальной является стадия начальных сведений об инициативе. 
    
5. В группе **Рабочий процесс** на ленте нажмите **Отправить**.
    
    > [!TIP]
    > Если элемент управления **Отправить** отключен, обновите страницу. 
  
    Если значение **Стоимость инициативы** превышает 25000 долларов США, то рабочий процесс переходит в стадию автоматического отклонения. На рисунке 16 показано состояние стадии автоматического отклонения, когда снова нажимается кнопка **Отправить**. Если **Стоимость инициативы** не превышает 25000 долларов США, то рабочий процесс переходит в стадию сведений о проекте (см. рисунок 17). 
    
    **Рис. 16. Рабочий процесс завершается на стадии автоматического отклонения**

    ![Рабочий процесс завершается на стадии автоматического отклонения] (media/pj15_CreateWorkflowSPD_AutomatedRejectionCompleted.gif "Рабочий процесс завершается на стадии автоматического отклонения")
  
    На рисунке 17 приведены другого теста с предложении по проекту с именем **Тестирование 2 - ветвление**, где — текущей на этапе создания рабочей области сведений о проекте. На этапе управления отображается в свете синего цвета, это означает, соответствующего этапа еще не активна.
    
    **Рис. 17. Рабочий процесс переходит в стадию сведений о проекте, если стоимость ниже $25000**

    ![Состояние рабочего процесса на этапе сведений о проекте] (media/pj15_CreateWorkflowSPD_ProjectDetailsStage.gif "Состояние рабочего процесса на этапе сведений о проекте")
  
6. Если вы переходите в стадию сведений о проекте, то на странице по умолчанию не нужно вводить дополнительные данные. Снова нажмите **Отправить**, чтобы перейти в стадию выполнения (см. рисунок 18). 
    
    **Рис. 18. Рабочий процесс готов к управлению на стадии выполнения**

    ![Состояние рабочего процесса на стадии выполнения] (media/pj15_CreateWorkflowSPD_ExecutionStage.gif "Состояние рабочего процесса на стадии выполнения")
  
На стадии сведений о проекте рабочий процесс не ожидает отправки события. Если на странице PDP сведений о проекте имеются дополнительные обязательные поля, то Project Server ожидает, пока в эти поля не будут введены данные, прежде чем перейти в стадию выполнения. Как задано в ветвящемся рабочем процессе, в стадии выполнения тоже не ожидается отправка события. В стадии выполнения можно изменить проект в качестве менеджера проектов или нажать **Закрыть** на вкладке **ПРОЕКТ** ленты. Если вы нажимаете **Закрыть**, то позднее можно вернуть проект и изменить его или оставить этот проект извлеченным.

Проект **Ветвящийся рабочий процесс** представляет простой пример только с одной проверкой сравнением. В рабочем процессе имеется три стадии на этапе создания и одна стадия на этапе управления процесса управления запросами. Чтобы полностью протестировать рабочий процесс, следует проверить все ветви рабочего процесса, используя экстремальные и типичные значения, чтобы убедиться в правильном поведении. 

<a name="pj15_CreateWorkflowSPD_ImportingVromVisio"> </a>

## <a name="importing-a-workflow-from-visio"></a>Импорт рабочего процесса из Visio

Чтобы изменить рабочий процесс, можно создать или изменить настраиваемые поля, управляемые рабочего процесса и создание и изменение рабочего процесса этапов и стадий. Чтобы добавить условия, действия, циклов и этапов и сохранить и повторная публикация рабочего процесса можно использовать SharePoint Designer 2013. Чтобы повторно использовать или сохранить резервную копию рабочего процесса, можно экспортировать в файл Visio 2013. 
  
Также можно создать или изменение рабочего процесса в Visio 2013 и импортировать файл в SharePoint Designer 2013 для использования с Project Web App. Чтобы использовать рабочего процесса без изменений, экземпляр Project Web App необходимо включить свойства стадии рабочего процесса, которые являются такие же, как в исходном экземпляр Project Web App. Дополнительные сведения об использовании Visio для создания рабочих процессов можно [Разработка рабочих процессов в SharePoint Designer 2013 и Visio 2013](https://msdn.microsoft.com/library/jj163272%28office.15%29.aspx).
  
> [!NOTE]
> При импорте файла Visio 2013 другой экземпляр Project Web App, этапы иметь разные стадии идентификаторы GUID, даже в том случае, если имена стадии совпадают с. После импорта рабочий процесс необходимо настроить свойства рабочей области, а также действие следует использовать значения, которые специфичны для экземпляра Project Web App. 
> 
> Если вы создаете рабочего процесса в Visio 2013, этапов и действий не имеют свойств, которые специфичны для экземпляра Project Web App, так как Visio не подключаются с Project Web App. При подключении SharePoint Designer 2013 с Project Web App, создание рабочего процесса и затем импортировать файл VSDX, перезаписать активных рабочих процессов. Затем необходимо настроить свойства рабочей области, а также действие в соответствии с значения, которые получает SharePoint Designer 2013 с Project Web App. 
  
### <a name="to-import-a-workflow-from-visio-to-sharepoint-designer"></a>Импорт рабочего процесса из Visio в SharePoint Designer

1. В Visio 2013 создайте простой рабочий процесс. Например выполните следующие действия:
    
   1. Откройте Visio и создайте рабочий процесс. Выберите область **КАТЕГОРИИ** для нового рабочего процесса, нажмите **Блок-схема**, выберите в области **Создать** шаблон **Рабочий процесс Microsoft SharePoint 2013** и нажмите **Создать**. Рабочий процесс откроется с фигурой Stage с именем **Stage 1**. Рабочий процесс содержит компонент Start и фигуры Enter и Exit как часть фигуры Stage.
    
      Когда наведите указатель мыши на стадии фигуру и выберите значок **Свойства** выделение отключено. Можно задать свойства рабочей области, а также действие после импорта схема рабочего процесса в SharePoint Designer 2013. 
    
      > [!NOTE]
      >  Вы должны использовать только наборы элементов фигуры, которые имеются в списке фигур блок-схемы: 
      > - **Действия — рабочий процесс SharePoint 2013**
      > - **Компоненты - рабочих процессов SharePoint 2013**
      > - **Условия - рабочих процессов SharePoint 2013**
  
   2. В области **фигур** нажмите **Экспресс-фигуры**, а затем перетащите фигуру Condition с именем **Если любое значение равно указанному значению** справа от фигуры Stage. 
    
   3. На вкладке **ГЛАВНАЯ** ленты выберите инструмент **Соединитель**, а затем соедините фигуру Exit в стадии с фигурой Condition (см. рисунок 19). 
    
      **Рис. 19. Соединение фигур Stage и Condition в схеме рабочего процесса Visio**

      ![Создание схемы рабочего процесса в Visio] (media/pj15_CreateWorkflowSPD_NewVisioWorkflow.gif "Создание схемы рабочего процесса в Visio")
  
   4. Перетащите еще две фигуры Stage справа от фигуры условия. Эти фигуры называются **Stage 2** и **Stage 3**.
    
   5. В правой части Фигура условия при помощи **соединительной** , подключения к фигуры ввод **Этап**2. Выбор средств **указатель** , дважды щелкните значок подключения для отображения текстового поля в поле имя и измените имя подключения Да.
    
   6. Соедините нижнюю часть фигуры Condition с фигурой Enter в фигуре **Stage 3**. Используя инструмент **Указатель**, щелкните правой кнопкой это соединение и выберите **Нет**. Чтобы дать соединителям имя **Да** или **Нет**, сработает любой из этих способов.
    
   7. В области **фигуры** выберите **действия - рабочих процессов SharePoint 2013**, а затем перетащите действие **Ожидание события проекта** в середину фигуры для **Этап 1** (см. на рисунке 20). 
    
      **Рис. 20. Оформление рабочего процесса в Visio**

      ![Выполнение рабочего процесса в Visio] (media/pj15_CreateWorkflowSPD_CompletedVisioWorkflow.gif "Выполнение рабочего процесса в Visio")
  
   8. На вкладке **процесс** на ленте в группе **Проверка диаграммы** выберите **Проверить схему**. Устраните все ошибки, а затем сохраните документ. Например имя рабочего процесса тестового файла из Visio.vsdx.
    
      Сведения об устранении ошибок рабочих процессов отображаются [ошибки проверки рабочего процесса устранения неполадок SharePoint Server 2013 в Visio 2013](https://msdn.microsoft.com/library/jj163971%28v=office.15%29.aspx).
    
2. Откройте SharePoint Designer 2013 и откройте же сайт Project Web App, который использовался для примера **Ветвление рабочего процесса** . 
    
3. В области **навигации** выберите **рабочие процессы** , а затем создать рабочий процесс сайта (Выбор **Рабочего процесса сайта** на вкладке **рабочие ПРОЦЕССЫ** на ленте). Например имя рабочего процесса простого рабочего процесса из Visio.
    
   В диалоговом окне **Создать рабочий процесс сайта** убедитесь, что тип платформы **Рабочего процесса SharePoint 2013 — Project Server**. Выберите команду **Создать**, и откроется область **текстового конструктора** для нового рабочего процесса SharePoint Designer. 
    
4. В группе **Управление** на вкладке **РАБОЧИЙ ПРОЦЕСС** ленты нажмите **Параметры рабочего процесса**.
    
5. В группе **Управление** на вкладке **Параметры рабочих ПРОЦЕССОВ** на ленте выберите **Импорт из Visio**и затем импортировать файл **тестового рабочего процесса из Visio.vsdx** , который ранее был сохранен. Диалоговое окно **Microsoft SharePoint Designer** предупреждение о том, что схема импортируемого содержит свойства не рабочего процесса и вопросом, следует ли перезаписывать текущего рабочего процесса. Нажмите кнопку **Да**. SharePoint Designer импортируется схема рабочего процесса, создает наборы элементов для фигур и отображается область **Визуальный конструктор** , который содержит импортированного рабочего процесса. 
    
6. Установка свойств для каждой рабочей области фигуры в рабочем процессе. К примеру первую фигуру рабочей области называется **Этап 1 (недопустимый)**, так как он не представляет допустимое стадией подключенного экземпляра Project Web App. При выборе или наведите указатель мыши на сцене можно выбрать значок **Свойства** в нижнем левом фигуры рабочей области, чтобы показать диалоговое окно **Свойств стадии** поле (см. на рисунке 21). Выберите стадии **Начальных сведений о предложении** в раскрывающемся списке **Рабочей области проекта** и нажмите кнопку **ОК**. SharePoint Designer переименовывает рабочей области.
    
   **Рис. 21. Установка свойства стадии в SharePoint Designer**

   ![Установка свойств в импортированном рабочем процессе] (media/pj15_CreateWorkflowSPD_ImportFromVisio1.gif "Установка свойств в импортированном рабочем процессе")
  
   Для второй стадии установите свойство **Стадия проекта** в значение **Автоматическое отклонение**. Для третьей стадии установите свойство **Стадия проекта** в значение **Выполнение**.
    
7. Аналогично, для действия **Дождаться события проекта** установите свойство **Имя события** в значение **Событие: при отправке проекта**.
    
8. Аналогично свойства condition **Если любое значение равно указанному значению** . Например значение **Стоимости данных: предложения Project**первого свойства **Value** . Присвойте свойству **оператор** **— меньше, чем**. Присвойте свойству второе **значение** на 5000.
    
9. Проверьте рабочий процесс на наличие ошибок, а затем сохраните его. Если ошибки отсутствуют, можно изменить представление на **Текстовый конструктор** (см. рисунок 22). 
    
   **Рис. 22. Просмотр импортированного рабочего процесса в текстовом конструкторе**

   ![Просмотр импортированного рабочего процесса] (media/pj15_CreateWorkflowSPD_WorkflowFromVisio.gif "Просмотр импортированного рабочего процесса")
  
10. Опубликуйте рабочий процесс. Если сохранить рабочий процесс, но не опубликовать его, то он не будет доступен при создании типа корпоративного проекта.
    
11. Чтобы проверить импортированные **простого рабочего процесса из Visio** в Project Web App, создание типа корпоративного проекта, который использует рабочего процесса и создайте проекты, использующие нового типа корпоративного проекта, как это делалось для примера **Ветвление рабочего процесса** . В этом случае тем не менее, проекты, которые меньше, чем стоимость 5000 отклоняются. 
    
При работе в этой статье была создана и проверен простой рабочий процесс ветвления с помощью SharePoint Designer 2013 для непосредственно стадий, условия и действия, которые использует рабочего процесса. Схема для ветвления рабочего процесса еще проще также создавать с помощью Visio 2013. Импортировать схемы Visio рабочего процесса в SharePoint Designer 2013, где установка свойств для каждой рабочей области, условие и действие из соединения с Project Web App.
  
Visio 2013 и SharePoint Designer совместно предоставляют удобные средства для конструкторов, руководители проектов, разработчики рабочих процессов и инженеров-испытателей, для создания, совместного использования и настройки рабочего процесса разработки для различных установок Project Server 2013 и Project Online. Для рабочих процессов, которые требуют программный доступ к Project Server, SharePoint Designer не предоставляет можно использовать Visual Studio 2012 с клиентской объектной модели (CSOM).
  
## <a name="see-also"></a>См. также

- [Project Server 2013 architecture](project-server-2013-architecture.md)
- [Руководство по установке и настройке диспетчера рабочих процессов SharePoint 2013](https://msdn.microsoft.com/library/jj163276%28office.15%29.aspx)
- [Общие сведения об упаковке и развертывании рабочего процесса в SharePoint 2013](https://msdn.microsoft.com/library/jj819316%28office.15%29.aspx)
- [Рабочие процессы в SharePoint 2013](https://msdn.microsoft.com/library/jj163986%28office.15%29.aspx)
- [Workflow development in SharePoint Designer 2013 and Visio 2013](https://msdn.microsoft.com/library/jj163272%28office.15%29.aspx)
- [Диагностика ошибок проверки рабочих процессов SharePoint Server 2013 в Visio 2013](https://msdn.microsoft.com/library/jj163971%28v=office.15%29.aspx)
- [Управление запросами и рабочий процесс](https://msdn.microsoft.com/library/cf7433a3-a531-4467-ac0c-df0c5d6881ae%28Office.15%29.aspx)

