---
title: Архитектура Project Server
manager: soliver
ms.date: 09/17/2015
ms.audience: Developer
localization_priority: Normal
ms.assetid: 2cfa5a6e-2f5c-440c-b35a-bc7a34648f9c
description: Project Server 2013 интеграции функциональных возможностей управления проектами во всей ферме SharePoint и позволяет использование Project Online с помощью клиентской объектной модели (CSOM) и интерфейс OData для данных отчетов.
ms.openlocfilehash: 633532d85b4d910c11a284231cb9a4c3e5a549cc
ms.sourcegitcommit: ef717c65d8dd41ababffb01eafc443c79950aed4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/04/2018
ms.locfileid: "25394099"
---
# <a name="project-server-architecture"></a>Архитектура Project Server

Project Server 2013 интеграции функциональных возможностей управления проектами во всей ферме SharePoint и позволяет использование Project Online с помощью клиентской объектной модели (CSOM) и интерфейс OData для данных отчетов.
   
Project Server 2013 — это система многоуровневого, охватывающий архитектуры, внедренные в Office Project Server 2007. Изменения архитектуры включают связь служба приложения Project с семейств веб-сайтов SharePoint, также некоторые бизнес-объекты на интерфейсном веб-сервере (WFE), клиентской объектной модели (CSOM) для удаленного доступа, одну базу данных проекта Интерфейс OData отчеты таблиц и представлений, интеграции Windows Workflow Foundation версии 4 (WF4) до 1.0 клиент диспетчера рабочих процессов в облаке или на локальном сервере и удаленных приемников событий, доступным с несколькими Project Server установок. В дополнение к локальной пользовательских решений можно создавать приложения, которые включают в себя удаленных приемников событий и компонентами, обращающимися к интерфейсы CSOM и OData.
  
Интерфейсные уровень включает Project Professional 2013, Project Web App и приложения сторонних производителей. Клиентские приложения общаться с средний уровень через интерфейс Project Server (PSI) или с помощью CSOM конечных точек, которые в свою очередь взаимодействовать с PSI и бизнес-объектов уровне. Доступ к базе данных интегрирована в бизнес-объекты. Система событий Project Server можно получить доступ к обработчиков событий локальных и удаленных приемников событий. Служба вычислений проекта реализует механизм планирования Project Professional в Project Server. Клиентские приложения не следует или не должно прямого доступа к базе данных Project. Project Server скрывает бизнес-объекты от клиентов.
  
> [!NOTE]
> Project Server основана на архитектуре SharePoint. Сведения об архитектуре SharePoint Server 2013 и модель приложений SharePoint в разделе *Начало работы по разработке для SharePoint* в документации для разработчиков Office 2013. 

<a name="pj15_Architecture_SharePoint"> </a>

## <a name="integrating-with-sharepoint-site-collections"></a>Интеграция с семействами сайтов SharePoint

Служба приложения Project в Project Server 2013 может быть связан с семейством сайтов SharePoint для использования со списками задач SharePoint, служба приложения Project также можно импортировать список задач SharePoint корпоративного проекта для полного Project Server элемент управления. Со списком задач SharePoint SharePoint поддерживает на сайте проекта в семейства веб-сайтов; Project профессиональный можно синхронизировать с и обновление списка задач. Сайт проекта может быть независимой списка задач SharePoint или список задач, который синхронизируется с MPP-файла; MPP-файлы могут храниться локально или в библиотеке SharePoint. 
  
Project Server поддерживает проекты, если он имеет полный доступ; Профессиональный выпуск Project сохраняет данные непосредственно в Project Server. В таблице 1 сравнивается поведение списка задач, веб-части расписания и другая функциональность для управления SharePoint списков задач и импортированных проектов, когда Project Server имеет полный доступ. Веб-часть расписания содержит сетки на странице Project Web App, где можно изменить расписание проекта. Связанные режим — где отчеты о состоянии вводятся данные, один раз задачи и расписаний; в режим одной операции задач отчеты о состоянии вводятся данные, отдельно от расписаний.
  
**Таблица 1. Сравнение списков задач SharePoint и полного доступа**

| Функция | Список задач | Полный доступ |
|:-----|:-----|:-----|
|**Список задач в SharePoint** <br/> |Чтение/запись  <br/> |Только чтение  <br/> |
|**Расписание веб-части** <br/> |Только чтение  <br/> |Чтение/запись  <br/> |
|**Reporting** <br/> |Создание подробных отчетов через Project Server  <br/> |Создание подробных отчетов через Project Server  <br/> |
|**Другие функции Project Server** <br/> | Заблокированные функции:  <br/>-Изменения project на сервере, с помощью Project Web App или настраиваемые клиентских приложений  <br/>-Отчеты о состоянии  <br/>-Не отображаются в режиме связанные задачи  <br/> |Включена полная функциональность  <br/> |
   
### <a name="managing-projects-as-sharepoint-task-lists"></a>Управление проектами как списками задач SharePoint
<a name="pj15_Architecture_VisibilityMode"> </a>

Когда Project Server связан с семейством сайтов SharePoint, где SharePoint поддерживает элемент управления, списки задач и Project Professional 2013 (.mpp) файлов в библиотеках документов являются видимыми для службы приложения Project, однако поддерживает SharePoint Основные данные для синхронизации (см). Расписание серверной стороны в веб-части расписания невозможно. Project профессиональный можно использовать для синхронизации с и изменение списка задач на сайте проекта. При работе со списками задач SharePoint, для использования всех возможностей Project Server можно постепенно развития организации.
  
На рис. 1 приведены следующие процессы при обслуживании проектов в списках задач SharePoint. 
  
- (А) Project Professional может выполнять синхронизацию со списками задач и создавать новые сайты проектов в семействе сайтов до или после связывания с приложением-службой Project.
    
- (Б) Project Server выполняет синхронизацию с данными сайта проекта для создания отчетов, однако основные данные обслуживаются SharePoint; к спискам задач предоставляется доступ на чтение и запись.
    
- (В) После связывания Project Professional может создавать новые проекты и сохранять их или публиковать в Project Server. Активный кэш в Project Professional обслуживает синхронизацию данных с Project Server.
    
- (D) при публикации нового проекта в Project Professional пользователь имеет возможность создавать сайт проекта для проекта. Проект могут также создаваться в Project Web App как тип проекта списка задач SharePoint или тип полного управления корпоративного проекта (типа корпоративного проекта). Шаг (D) показывает полный доступ типа корпоративного проекта.
    
**Рис. 1. Использование сайтов проектов как списков задач SharePoint**

![Использование сайтов проекта в режиме видимости] (media/pj15_Architecture_VisibilityMode.gif "Использование сайтов проекта в режиме видимости")

<br/>

### <a name="managing-projects-with-full-control"></a>Управление проектами с полным доступом
<a name="pj15_Architecture_ManagedMode"> </a>

Когда Project Server связан с семейства веб-сайтов и полный доступ, Project Server импортирует списках задач приложения как корпоративных проектов SharePoint и можно удалить любые связанные MPP-файлы. Project Server поддерживает основных данных для синхронизации списка задач; списки задач в семействе сайтов становятся доступны только для чтения (см). Импортированные проекты можно изменить с помощью Project Professional, а также с помощью Project Web App.
  
> [!NOTE]
> После того как Project Server импортирует проект, пользователь выбирает, требуется ли удалить проект с сайта или разорвать связь, прежде чем приступить к его редактированию. Этот выбор можно сделать в Project Professional. 
  
На рис. 2 приведены следующие процессы при обслуживании корпоративных проектов Project Server с уровнем полного доступа.
  
- (А) Пользователь может выбрать конкретные сайты проектов для импорта. Project Server импортирует сайты проектов и при необходимости удаляет связанные MPP-файлы. Список задач SharePoint, состоящий из импортированных проектов, становится доступным только для чтения.
    
- (B) после сопоставления Project профессиональный создает новые проекты и сохраняет или публикует в Project Server. Активный кэш в Project Professional обеспечивает синхронизацию данных с Project Server. Веб-часть расписание в Project Web App можно сделать расписание серверной стороны.
    
- (C) при публикации нового проекта в Project Professional пользователь имеет возможность создавать сайт проекта для проекта. Проект можно также созданы в Project Web App с помощью типа корпоративного проекта для полного управления и опубликован со списком задач только для чтения к сайту проекта в коллекции веб-сайтов.
    
**Рис. 2. Использование сайтов проектов с полным доступом**

![Использование сайтов проектов в управляемом режиме] (media/pj15_Architecture_ManagedMode.gif "Использование сайтов проектов в управляемом режиме")
  
## <a name="general-architecture"></a>Общая архитектура
<a name="pj15_Architecture_General"> </a>

На рисунке 3 показаны обобщенное представление архитектуры Project Server 2013, включая приложения-службы Project, один экземпляр Project Web App на WFE и нескольких клиентских приложений, включая Project Professional 2013.
  
Может существовать несколько экземпляров Project Web App, которые взаимодействуют с серверной приложения-службы Project. Для локальной установки интерфейсный веб-сервер может быть на отдельном сервере в ферме SharePoint, или она может быть на том же сервере SharePoint с приложением-службой Project. Project Online включает в себя WFE, приложения-службы Project и 1.0 клиент диспетчера рабочих процессов на локальный или удаленный сервер. 
  
**Рис. 3. Общая архитектура Project Server 2013**

![Архитектура Project Server] (media/pj15_Architecture_ProjectServiceApp_WFE.gif "Архитектура Project Server")

<br/>

Следующие общие замечания применяются только к рис. 3.
  
- **Project Online:** Можно создавать приложения, использующие интерфейсы CSOM, REST и OData. Пакет приложения также можно установить удаленных приемников событий в настраиваемой веб-службы на локальном сервере, Azure server или Microsoft Azure. Project Online не поддерживает сторонних производителей локальных решений, интерфейс WCF, интерфейс ASMX или обработчики событий локального. 
    
- **Приемников событий:** Приемники событий можно также вызвать обработчиков событий. Project Online поддерживает регистрацию удаленных приемников событий Project Server, которые можно использовать с экземпляр Project Web App в облаке или в локальной установки Project Server. Локальная установка Project Server поддерживает удаленных приемников событий и обработчиков событий локального с полным доверием. 
    
- **Браузеры:** Нет никаких ограничений браузеров на просмотр некоторые страницы Project Web App в Project Server 2010. Для работы с Project Web App поддерживаются следующие браузеры: 
    
  - Internet Explorer 8.x (в Windows 7 и более ранних версий Microsoft Windows), Internet Explorer 9.x и Internet Explorer 10.x 
  - Firefox 4.x (в Windows, Mac OS-X и Linux/Unix);
  - Safari 5.x (в Windows и Mac OS-X);
  - Chrome.
    
- **Программные интерфейсы:** Для приложений сторонних производителей Project Online предоставляет интерфейс HTTP и HTTPS (включая REST), интерфейс CSOM, службе OData для CSOM и службе OData для создания отчетов. Для сторонних клиентских приложений, которые являются локальной (в интрасети) можно использовать интерфейс WCF для PSI или можно использовать интерфейсы CSOM, OData и REST по протоколу HTTP. Project Web App и Project Professional 2013 клиентов с помощью интерфейса WCF. В односерверной установки интерфейсного веб-службы ASMX, CSOM и REST во внутренней сети вызов служб WCF серверной. 
    
    > [!NOTE]
    > Интерфейс на основе SOAP ASMX для веб-служб в PSI по-прежнему доступны в Project Server 2013, но является устаревшим. 
  
    Внутренняя служба OData.svc WCF реализуется службы OData для создания отчетов. Вы можете получить документ метаданных службы для данных отчетов с помощью `https://ServerName/ProjectServerName/_api/ProjectData/$metadata`. 
    
    Службы OData для CSOM предназначена для платформ, таких как Windows RT, iOS и Android, где можно использовать интерфейс REST с помощью JavaScript в HTML-страниц. 
    
    > [!NOTE]
    > Хотя `$metadata` вариант для **ProjectData** отчетов службы является допустимым, `$metadata` параметр для службе **ProjectServer** CSOM удаляется в выпущенной версии Project Server 2013. Дополнительные сведения о запросах REST для CSOM [со стороны клиента объектной модели (CSOM) для Project Server](client-side-object-model-csom-for-project-2013.md)см. 
  
- **Сервер пересылки PSI:** Программный доступ к PSI на отдельном WFE проходит через сервер пересылки PSI, включая пересылки WCF и пересылки службы Web. Клиенты, которые используют интерфейс ASMX доступа к PSI через пересылки службы Web. Клиенты, которые используют интерфейс WCF доступа к PSI через пересылки WCF. Программный доступ с помощью CSOM, OData и REST, передается через пересылки WCF. 
    
- **Рабочих процессов:** Декларативные рабочие процессы (рабочие процессы, которые определены в SharePoint Designer 2013) разгруженных на 1.0 клиент диспетчера рабочих процессов для обработки. Клиент диспетчера рабочих процессов версии 1.0 можно запустить на отдельном сервере в ферме SharePoint, Microsoft Azure в облаке, либо на отдельном компьютере Project Server для проверки или демонстрации. Закодированные рабочие процессы, разработанных с помощью Visual Studio 2012 обрабатываются во время выполнения рабочего процесса в SharePoint, как и в Project Server 2010. Для получения дополнительных сведений см [Приступая к разработке рабочих процессов Project Server](getting-started-developing-project-server-workflows.md).
    
- **Демилитаризованной зоной (DMZ):** На рисунке 3 не указывается, что на локальном сервере WFE может быть изолирован дополнительным брандмауэром в сети периметра (также называемой «демилитаризованной зоной» или DMZ). Сети периметра можно разрешить клиентам Интернета для доступа к SharePoint и Project Server через брандмауэр. 
    
- **Веб-службы SharePoint:** На рисунке 3 не отображает инфраструктуры SharePoint, такие как серверного приложения веб-служб SharePoint, которая является частью SharePoint Server 2013. При установке Project Server приложение-служба Project добавляется к веб-службам SharePoint. 
    
Уровень интерфейсного включает в себя приложениями сторонних производителей, Project профессиональный и Project Web App. Браузер отображает страницы ASP.NET 4.0 (ASPX-страницы) в Project Web App. Project Web App страницы используют веб-частей Project Server, взаимодействовать с PSI (en), а также использовать стандартные веб-части SharePoint. 
  
Средний уровень включает в себя PSI и уровень объекта бизнеса, который состоит из логических объектов, которые представляют бизнес-сущности Project Server. Бизнес-сущности включают Project, задач, ресурсов, назначений и т. д. PSI и на уровне объекта business тесно связан и размещать на том же сервере. Клиентское приложение вызывает PSI через один из доступных интерфейсов и PSI вызывает бизнес-объектов. Для повышения производительности WFE Project Server 2013 включает в себя некоторые бизнес-объектов для запросов, которые не используйте система очередей Project Server и не требуется, чтобы служба вычислений проекта. Бизнес-объекты WFE напрямую связываются с базы данных Project.
  
Компоненты Project Web App для Project Server использование базы данных конфигурации SharePoint 2013 для настройки сайта проекта и базы данных контента для содержимого сайта проекта, такие как списки задач, настраиваемые страницы, рабочие процессы, параметры управления, документы и списки проблемы, рисков и обязательств. Конфигурация SharePoint и дополнительные возможности поддержки баз данных контента для управления проектами, такие как шаблоны проектов и рабочие области, списки для совместной работы группы, а также отчетов.
  
### <a name="project-web-app-and-the-wfe"></a>Project Web App и веб-интерфейс
<a name="pj15_Architecture_PWAServer"> </a>

Можно настроить несколько экземпляров Project Web App на WFE и нескольких серверах WFE в корпоративной интрасети, чтобы включить распределение нагрузки для клиентов интрасети. Если клиентское приложение использует экземпляр Project Web App на отдельном сервере WFE, вызовов PSI направляются через сервер пересылки PSI. Сервер пересылки PSI (пересылки WCF или пересылки службы Web) для выполнения следующих функций:
  
- оптимизация вызовов интерфейса PSI удаленными клиентами;
    
- разделение вызовов PSI на те, которым требуется служба очередей Project Server, и те, которым она не требуется (имена асинхронных методов PSI начинаются с Queue, например **QueueCreateProject**);
    
- определение вызовов PSI, вызывающих зарегистрированные обработчики событий;
    
- определение вызовов PSI, для которых требуется служба вычислений Project;
    
- использование серверного кэша, который взаимодействует с клиентским активным кэшем в Project Professional для сокращения времени передачи вызова в Project Server и обратно.
    
После SharePoint Server выполняет проверку подлинности пользователя сервера Project Server, сервер пересылки PSI прозрачно отправляет запросы, использующие серверной службы для службы PSI на компьютере с Project Server. Запросы, не требующие серверным службам, передаются в бизнес-объекты в локальный экземпляр Project Web App. Сервер пересылки PSI повышает масштабируемость, производительность и надежность для Project Server, обработка по локальной сети, глобальной сети и в Project Online.
  
Project Web App, разработанных с помощью ASP.NET 4.0. Визуальные элементы в ASPX-файлы (HTML, серверные элементы управления и статический текст), отдельно от логики программирования в классах кода, которые находятся в формате скомпилированной сборки (DLL-файлы). Страниц сайта в Project Web App, такие как страница верхнего уровня, центра проектов и центра отчетов можно настроить с помощью веб-частей. Страницы приложений, у которых нет вариант **Изменить страницу** в меню **Действия сайта** , невозможно изменить, таких как страницы параметров сервера и на странице просмотра расписания. 
  
### <a name="the-csom-and-the-project-server-interface"></a>Модель CSOM и интерфейс Project Server (PSI)
<a name="pj15_Architecture_PSI"> </a>

PSI добавляется в 22 public службы, такие как **проектов**, **ресурсов**, **CustomField**и **отчеты о состоянии**. PSI также содержит семь закрытый служб для внутреннего использования. PSI — это фундаментальные API из Project Server; она предоставляет возможности Project Server CSOM и внешних приложений. CSOM включает классы, которые обращаются наиболее часто используемые PSI классы и члены, которые используются для приложений сторонних производителей. В Project Server 2013 некоторые функциональные возможности Project Server недоступен в CSOM, такими как службы **администрирования**, **Календарь**, **PortfolioAnalyses**и **безопасности** . 
  
Project Professional 2013 и Project Web App использования PSI для доступа к данным Project Server в черновиков, опубликованных проектов и архивировать таблицы и представления базы данных Project. Службы PSI доступны через прокси-сервер файл или сборку прокси-сервера для службы WCF или веб-службы ASMX.
  
> [!NOTE]
> CSOM — это основной интерфейс для разработчиков Project Server сторонних производителей; его можно использовать для приложений, которые обращаются как локальная установка Project Server и Project Online. Мы рекомендуем использовать CSOM для разработки новых приложений, если CSOM включает в себя для вашего приложения. 
  
Некоторые бизнес-приложений (LOB) и другими приложениями сторонних производителей, предназначенных для Project Server 2010 требуются службы PSI, которые еще не представлены в CSOM. Если они предназначены только для локальной установки Project Server, приложения могут продолжить использовать интерфейс WCF или ASMX интерфейс PSI.
  
Клиентские приложения вызовов PSI через прокси-службы. Все службы PSI через access клиентов, использующих интерфейс WCF `https://ServerName/ProjectServerName/_vti_bin/psi/ProjectServer.svc`. Клиенты, которые используют интерфейс веб-службы ASMX используйте URL-адрес Project Web App для определенной службы. Например служба **ресурсов** был создан `https://ServerName/ProjectServerName/_vti_bin/psi/resource.asmx?wsdl`. Если приложения не имеют доступа к интрасети в Project Server, они могут использовать сервер Project Web App в сети периметра (не показано на рисунке 3).
  
На рисунке 4 показаны области **подключения** в **диспетчере Internet Information Services (IIS)** для установки одного сервера SharePoint Server 2013, Project Server 2013 и локальный сайт рабочего процесса управления 1.0 клиент диспетчера рабочих процессов. Семейства сайтов SharePoint (A) включает в себя интерфейсных службы PSI в `_vti_bin\PSI` виртуальный подкаталог. Приложение SharePoint Web Services (B) включает в себя приложение-служба Project, с помощью служб PSI серверной в `508c23fb7dfd4c83a8919fae24bc68c5/PSI` виртуальный подкаталог. Идентификатор GUID — это имя экземпляра приложения-службы Project для установки Project Server. 
  
**Рис. 4. Интерфейсная служба PSI (А) и внутренняя служба PSI (Б) в окне диспетчера IIS**

![ВНЕШНЕЕ и внутреннее приложения PSI] (media/pj15_Architecture_PSI_IIS.gif "ВНЕШНЕЕ и внутреннее приложения PSI")
  
Клиентские приложения не могут получить доступ к непосредственно служб WCF для PSI в приложение-служба Project серверной. Если они не требуют доступа к Project Online, клиентских приложений и компонентов бизнес-приложений с помощью прокси-серверы PSI. URL-адресом серверной для интерфейса WCF службу **ресурсов** на рисунке 4, например будет `https://ServerName:32843/508c23fb7dfd4c83a8919fae24bc68c5/psi/resource.svc`. Порт 32843 — HTTP-порт по умолчанию для приложения веб-служб SharePoint (32844 — номер порта для соединений HTTPS). Тем не менее файл web.config для Project Web App блоки прямой доступ к серверным службам PSI.
  
> [!NOTE]
> Загрузить пакет SDK Project 2013 включает в себя файлы PSI прокси-сервера для службы WCF и службы ASMX и инструкции по их компиляции в сборки прокси-сервера. > Для создания обновленные файлы прокси-сервер PSI, с помощью интерфейса WCF, необходимо с помощью служебной программы svcutil.exe или Visual Studio непосредственно на сервере Project Server. 
  
Члены службы PSI обычно создания или использование **объектах** как означает, что для обмена данными с бизнес-объекты. Существует также несколько различных моделей для разработки PSI. Например службы PSI **ресурсов**, **настраиваемых полей**и **LookupTable** используйте объекты фильтра XML для обработки **набора данных** , и не другие службы; Некоторые методы в **отчеты о состоянии** службы используйте параметр _changeXml_ , другие методы и службы нет. CSOM не использует наборов данных. Несмотря на то, что CSOM имеет другую модель программирования, чем PSI, и вы можете использовать сборки .NET или JavaScript, разработка с помощью CSOM обычно проще и согласованность чем разработка с помощью PSI. 
  
Дополнительные сведения о PSI просмотрите [Общие сведения о Project PSI](project-psi-reference-overview.md). Дополнительные сведения о CSOM можно [со стороны клиента объектной модели (CSOM) для Project 2013](client-side-object-model-csom-for-project-2013.md).
  
### <a name="business-objects-in-the-wfe-and-the-project-service-application"></a>Бизнес-объекты в веб-интерфейсе и приложении-службе Project
<a name="pj15_Architecture_BusinessObjects"> </a>

Внутренняя объектная модель Project Server включает бизнес-объекты, которые представляют логические сущности, такие как "Проект" и "Ресурс". Клиентские приложения получают доступ к бизнес-объектам только через CSOM или PSI. Бизнес-объекты, в свою очередь, получают доступ к черновикам, опубликованным и архивным таблицам и представлениям в базе данных Project.
  
Бизнес-объекты не предоставляются сторонним разработчикам. Интерфейс PSI обрабатывает сопоставление API с бизнес-объектами, а модель CSOM сопоставляет свои API с PSI. Логические сущности бизнес-объектов можно разделить на три типа.
  
- **Основные сущности:** такие объекты, как проекты, задачи, назначения, ресурсы и календари. Основные объекты включают основную бизнес-логику, такую как разрешения и правила именования. 
    
- **Бизнес-сущности:** такие объекты, как расписания, портфели проектов и модели. Бизнес-сущности включают дополнительную бизнес-логику и, как правило, создаются на основе основных сущностей. 
    
- **Сущности поддержки:** такие объекты, как безопасность и проверка. 
    
В Project Server 2010 все бизнес-объекты реализованы в приложении-службе Project. В Project Server 2013 интерфейсный веб-сервер служит для размещения многие из бизнес-объекты, которые обрабатывают синхронные методы и служба вычислений проекта не требуется. Синхронные методы PSI, такие как **DeleteProject** и **ReadAssignments** следует использовать службы очередей Project Server. Асинхронные методы PSI имеют имена, начинающиеся с `Queue`, таких как **QueueCreateProject** и **QueueUpdateTimesheet**. Асинхронный метод отправляет сообщение в службы очередей Project Server, который планирует метода при возвращении элемента управления для пользователя.
  
Сервер пересылки PSI определяет, какие запросы отправляются в приложение-службу Project, а какие могут обрабатываться бизнес-объектами в веб-интерфейсе. Бизнес-объекты в веб-интерфейсе обходят службу-приложение Project и получают прямой доступ к базе данных Project (так же как и другие процессы SharePoint в веб-интерфейсе получают прямой доступ к базам данных конфигурации и контента). Выполнение многих бизнес-объектов в веб-интерфейсе повышает эффективность работы Project Server, снижает нагрузку на уровень приложений и оптимизирует масштабируемость Project Server при возрастании нагрузки.
  
> [!NOTE]
> В Project Server 2013 обработчиков событий локального должен быть развернут на интерфейсный веб-сервер и на компьютере серверной Project Server. 
  
### <a name="project-server-database"></a>База данных Project Server
<a name="pj15_Architecture_DAL"> </a>

В Project Server 2013 четыре базы данных Project Server из предыдущих версий объединены в одну базу данных проекта в SQL Server. Имя базы данных Project по умолчанию — ProjectService. Работы с отчетами таблицы и представления сохраняют предыдущей имена с `dbo` префикс, такие как dbo. MSP_EpmProject и dbo. MSP_EpmProject_UserView. Таблицы и представления, которые ранее были в базу данных черновиков имеют `draft` префикса. Таблицы и представления из базы данных опубликованных проектов имеют `pub` префикса. Таблицы и представления из архивной базы данных имеют `ver` префикса. 
  
> [!IMPORTANT]
> Прямой доступ не поддерживается для черновика ( `draft` префикс), опубликованных ( `pub` префикс) и архивов ( `ver` префикс) таблицы и представления. Отчеты о следует использовать только отчетности таблиц и представлений, которые имеют `dbo` префикса. 
  
Данные разделяются в базе данных Project сервера Project Server следующим образом.
  
- Черновик таблицы и представления, содержащие данные из отменить публикацию проектов, которые были созданы с Project профессиональный и других приложений. Project Web App не отображает данные проекта из черновиков таблиц и представлений.
    
- Опубликованные таблицы и представления содержат всех опубликованных проектов и корпоративных ресурсов, глобальных данных для типов корпоративных проектов (EPTs) и другие шаблоны проектов. Опубликованные проекты, отображаются в Project Web App. Опубликованные данные также включает таблицы, которые специфичны для Project Web App (расписаний, моделей, представлений и т. д.) и глобальных данных таблицы (настраиваемые поля таблицы подстановки, разрешения авторизации Project Server и метаданных).
    
- Архивные данные содержат резервные копии проектов, ресурсов, настраиваемых полей и других данных.
    
- Данные отчетов можно использовать для доступа только для чтения в приложениями сторонних производителей, а также для отчетов. Кубы OLAP сервера Project используйте представления отчетов, которые имеют `_OlapView` суффикс. Кубы OLAP, доступные в локальной установки Project Server, но не доступны в Project Online. 
    
    Данные отчетов — полные и обновляются практически в режиме реального времени. Таблицы и представления отчетов оптимизированы для создания отчетов только для чтения; например, таблицы отчетов не нормализованы, чтобы предоставлять избыточные данные и сократить число реляционных таблиц.
    
Логические сущности, такие как "Ресурс" или "Проект" могут охватывать несколько таблиц; все таблицы для конкретной сущности будут иметь тот же основной ключ. Основной ключ представляет собой GUID в отдельном столбце, который однозначно идентифицирует один экземпляр конкретной сущности.
  
Данные Project Server для каждого экземпляра Project Web App хранится в отдельной базе данных Project с другим именем. Клиентские приложения, которые имеют прямой доступ к Project Server непосредственно могут читать отчетов таблицы и представления. Удаленный доступ для клиентских приложений можно использовать интерфейс OData и интерфейс REST для получения данных для отчетов. Клиенты следует использовать только CSOM или PSI для доступа к черновиков, опубликованных проектов и архивировать таблицы и представления. Служба данных отчетов (служб удаленных рабочих СТОЛОВ, которая не отображается на рисунке 3) обновляет данные отчетов из опубликованных данных в почти в режиме реального времени. База данных Project может размещаться на отдельном сервере.
  
Схемы, приведены только для работы с отчетами таблицы и представления. Для локальной установки Project Server можно добавить отчетности таблиц и представлений для сущностей, которые не определены в схеме базы данных Project. Можно также создать отдельные базы данных для настраиваемых локальных приложений. Изменения не поддерживается для черновиков, опубликованных и архивация таблицы и представления. Поскольку проект базы данных не напрямую доступны в Project Online, таблиц и представлений отчетов нельзя изменить. Тем не менее если у учетной записи SQL Azure, можно создать отдельные базы данных для использования настраиваемых с Project Online.
  
### <a name="event-receivers"></a>Приемники событий
<a name="pj15_Architecture_EventHandlers"> </a>

Обработчики событий локальных и удаленных приемников событий для Project Server возможности расширения сторонних производителей в ответ на события Project Server, такие как создание и публикация проекта. В Project Server 2010 все обработчики событий являются локальными и записывается в коде с полным доверием, развернут непосредственно на компьютере, где запущен Project Server и на интерфейсных веб-серверах и запустите внутри системы событий Project Server. Так как Project Online не могут использовать обработчики событий с полным доверием, Project Server 2013 реализует удаленных приемников событий, которые похожи на удаленных приемников событий в SharePoint Server 2013. Обработчики событий традиционное письмо с полным доверием и удаленных приемников событий, можно использовать для локальной установки Project Server 2013.
  
Project Server удаленного приемника событий можно реализовать в настраиваемой веб-службы с помощью конечной точки SOAP, на котором работает в Microsoft Azure или в других средах, которые поддерживают веб-служб SOAP. Пакет приложения Project Server может включать удаленных приемников событий, которые устанавливаются с приложением.
  
Удаленные приемники событий можно обратного вызова Project Server с помощью CSOM конечных точек, (не показано на рисунке 3). Вызов удаленного приемника событий включает сведения из системы событий Project Server и экземпляр Project Web App (или клиента Project Web App в Project Online), который выдает вызова. Удаленные приемники событий позволяют создавать и размещения одного веб-службы, которое может использоваться несколько установок Project Server. В отличие от этого обработчиков событий локального с полным доверием должен быть развернут в каждой установке Project Server.
  
### <a name="publishing-and-server-side-scheduling"></a>Публикация и серверное расписание
<a name="pj15_Architecture_PublishingScheduling"> </a>

Project Server 2013 поддерживает оба проекта ручных и автоматических расписание обновления. Процесс по умолчанию — это ручной расписание обновления. То есть руководитель проекта извлекает и открытие проекта в Project Professional и Project Web App, применяет изменения и затем сохраняет и публикует проект, чтобы сделать изменения доступными для всех. Project профессиональный имеет механизм планирования, которая вычисляет изменения, а затем сохраняет изменения на сервере Project Server. В Project Server 2010 механизм планирования на сервере является реализация отличается от механизм планирования в Project Professional.
  
В Project Server 2013 службы вычислений Project реализует же механизм планирования в Project Professional 2013. В службе Windows с именем **Службы вычислений Microsoft Project Server**запущена служба вычислений проекта. Изменение расписания проекта в Project Web App или с приложениями сторонних производителей, использующих CSOM результатов в точности те же расписание изменения, сделает Project Professional.
  
> [!NOTE]
> Приложения сторонних производителей, использующих PSI может отображаться некоторые планирования отличия от расписания, которая вычисляет Project Web App. Для обеспечения обратной совместимости открытые методы PSI, выполните на сервере планирования по-прежнему использовать механизм планирования, который был представлен в Project Server 2010. Исключение **QueueUpdateProject2**, который – это новый метод PSI в Project Server 2013. Например старые механизм планирования не запланировать подпроекты или ссылки на другие проекты и не вычисления освоенного полей. Чтобы избежать потенциальных планирования различия между приложениями сторонних производителей и Project Professional и Project Web App, следует разработать приложений с помощью CSOM где это возможно. 
  
Project Server позволяет диспетчеру проектов обновлять опубликованную версию проекта из черновика следующим образом.
  
1. Project Server применяет изменения и перепланирует опубликованную версию.
    
2. Project Server сохраняет обновление для применения к черновой версии, если происходит одно из следующих событий:
    
   - Project Professional открывает проект;
    
   - Project Professional пытается опубликовать проект.
    
3. В случае возникновения конфликта диспетчер проектов получает уведомление и должен устранить конфликт, прежде чем можно будет опубликовать черновую версию.
    
## <a name="see-also"></a>См. также

- [Обзор Project 2013 для разработчиков](https://msdn.microsoft.com/library/8da91ab0-af4f-429f-8241-490600e3f7bd%28Office.15%29.aspx)
- [Возможности программирования для Project Server](project-server-programmability.md)  
- [Клиентская объектная модель (CSOM) для Project 2013](client-side-object-model-csom-for-project-2013.md)  
- [Какие задачи PSI выполняет, а какие — нет](what-the-psi-does-and-does-not-do.md)  
- [Начало разработки рабочих процессов Project Server](getting-started-developing-project-server-workflows.md)   
- [Справочный обзор PSI Project](project-psi-reference-overview.md)   
- [Протокол OData](https://www.odata.org/)
    

